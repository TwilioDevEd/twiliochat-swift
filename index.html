<!DOCTYPE html><html><head><title>Twilio Chat</title><style>body, html {
  height:100%;
  width:100%;
  padding:0;
  margin:0;
  overflow:hidden;
  background-color:#ddd;
}
.wrapper {
  height:100%;
  width:100%;
}</style><link rel="shortcut icon" href="//twilio.com/bundles/marketing/img/favicons/favicon.ico"><link rel="apple-touch-icon" href="//twilio.com/bundles/marketing/img/favicons/favicon_57.png"><link rel="apple-touch-icon" sizes="72x72" href="//twilio.com/bundles/marketing/img/favicons/favicon_72.png"><link rel="apple-touch-icon" sizes="114x114" href="//twilio.com/bundles/marketing/img/favicons/favicon_114.png"><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css"><link rel="stylesheet" href="viewsaurus.css"></head><body><div class="wrapper"><div id="viewsaurus" data-title="Twilio Chat"><div class="saurus-panes"><div class="saurus-prose"><div class="saurus-prose-header"><div class="title-outer"><span class="step-title">Twilio Chat</span></div></div><div class="saurus-nav-buttons"><div class="saurus-nav-button nav-overview"><div class="saurus-nav-button-inner"><i class="fa fa-fw fa-list"></i></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-previous"><div class="saurus-nav-button-inner"><a href=""> <i class="fa fa-fw fa-play fa-rotate-180"></i></a></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-next clickable"><div class="saurus-nav-button-inner"><a href="#1"> <i class="fa fa-fw fa-play"></i></a></div></div><div class="saurus-next-title"><span class="next-title-inner"></span></div></div><div class="saurus-progress-bar"></div><div class="saurus-start"><p>Learn to implement a simple chat application using Twilio IP Messaging Client</p><a href="#0">Start Tutorial</a></div><div class="saurus-content"><div data-title="Twilio Chat Swift" class="chapter"><div data-title="Introduction" data-file="twiliochat/AppDelegate.swift" class="step"><h2 id="introduction">Introduction</h2>
<p>Ready to implement a chat application using Twilio IP Messaging Client?
Here is how it works at a high level:</p>
<ol>
<li><p>We use <a href="//www.parse.com/">Parse</a> to handle session management and user
registration in our app. </p>
</li>
<li><p><a href="//www.twilio.com/ip-messaging">Twilio IP Messaging</a> is the core product
we&#39;ll be using to handle all the chat functionality.</p>
</li>
<li><p>We use a server side app to generate <a href="//www.twilio.com/docs/api/ip-messaging/guides/identity">user access
tokens</a> which contains
all your Twilio account information. The IP Messaging Client uses this token
to connect with the API</p>
</li>
<li><p><a href="//media.twiliocdn.com/sdk/rtc/ios/common/releases/0.1.7.b23-4ca8945/docs/">Twilio Common</a>
is the part of the SDK than handles access tokens and even refreshes them upon token
expiration.</p>
</li>
</ol>
<hr>
<p><strong>See Also:</strong></p>
<ul>
<li><a href="//www.twilio.com/docs/api/ip-messaging">IP Messaging API</a></li>
<li><a href="//www.twilio.com/docs/api/ip-messaging/guides/quickstart-ios">iOS QuickStart</a></li>
<li><a href="//www.twilio.com/docs/api/ip-messaging/guides/channels">Channels and Messages</a></li>
<li><a href="//www.twilio.com/docs/api/ip-messaging/guides/channels">User Identity &amp; Access Tokens</a></li>
<li><a href="//media.twiliocdn.com/sdk/rtc/ios/ip-messaging/releases/0.13.3.b181-17abeb8/docs/">Twilio IP Messaging Client Reference</a></li>
<li><a href="//media.twiliocdn.com/sdk/rtc/ios/common/releases/0.1.7.b23-4ca8945/docs/">Twilio Common Reference</a></li>
</ul>
</div><div data-title="Initializing the Client" data-file="twiliochat/IPMessagingManager.swift" data-highlight="98-145" class="step"><h2 id="initializing-the-ip-messaging-client">Initializing the IP Messaging Client</h2>
<p>The only thing you need to create a client, is an access token. This token
holds information about your Twilio account and IP Messaging API keys. You
can find an example application written in node that demonstrates how to
generate the token <a href="//github.com/TwilioDevEd/twiliochat">here</a>.</p>
<p>We use <a href="//parse.com/docs/cloudcode/guide#cloud-code-advanced-cloud-code-webhooks">Parse cloud code
webhooks</a>
to make a request to our server and get the access token.</p>
<hr>
<p><strong>See Also:</strong></p>
<ul>
<li><a href="//parse.com/docs/cloudcode/guide#cloud-code-advanced-cloud-code-webhooks">Parse cloud code webhooks</a></li>
</ul>
</div><div data-title="Getting the Channel List" data-file="twiliochat/ChannelManager.swift" data-highlight="71-112" class="step"><h2 id="getting-the-channel-list">Getting the Channel List</h2>
<p>Our <code>ChannelManager</code> class takes care of everything related to channels.
The first thing we need to do when the class is initialized, is to store
a list of channels of type <code>TWMChannelList</code> that we get by calling the method <code>channelsListWithCompletion</code>
from the IP Messaging Client.</p>
<p>Once we have a <code>TWMChannelList</code> we can fetch the actual channels using the
<code>channelsList&#39;s</code> method <code>loadChannelsWithCompletion</code>. Once that operation
finishes successfully, call the method <code>allObjects</code> on the same object, to
get an array of channels.</p>
</div><div data-title="Join the General Channel" data-file="twiliochat/ChannelManager.swift" data-highlight="20-67" class="step"><h2 id="join-the-general-channel">Join the General Channel</h2>
<p>This application will try to join a channel called &quot;General Channel&quot; when it starts.
If the channel doesn&#39;t exist, we&#39;ll create one with that name. The scope of
this example application will show you how to work only with public channels,
but the IP Messaging client allows you to create private channels and handle
invitations.</p>
<p>Once you have joined a channel, you can register a class as the <code>TWMChannelDelegate</code>
so you can start listening to events such as <code>messageAdded</code> or <code>memberJoined</code>.
We&#39;ll show you how to do this in the next step.</p>
</div><div data-title="Listen to Channel Events" data-file="twiliochat/MainChatViewController.swift" data-highlight="209-237" class="step"><h2 id="listen-to-channel-events">Listen to Channel Events</h2>
<p>We registered <code>MainChatViewController</code> as the <code>TWMChannelDelegate</code>, and here
we implemented the following methods that listen to channel events:</p>
<ul>
<li><code>messageAdded</code>: When someone sends a message to the channel you are connected to.</li>
<li><code>channelDeleted</code>: When someone deletes a channel.</li>
<li><code>memberJoined</code>: When someone joins the channel.</li>
<li><code>memberLeft</code>: When someone leaves the channel.</li>
</ul>
<p>As you may have noticed, each one of these methods include useful objects
as parameters, such as the actual message that was added to the channel.</p>
</div><div data-title="Joining Other Channels" data-file="twiliochat/MainChatViewController.swift" data-highlight="131-146" class="step"><h2 id="joining-other-channels">Joining Other Channels</h2>
<p>The application uses <a href="//github.com/John-Lluch/SWRevealViewController">SWRevealViewController</a>
to show a sidebar that contains a list of the channels created for that Twilio account.</p>
<p>When you tap on the name of a channel from the sidebar, that channel is set
on the <code>MainChatViewController</code>. The <code>joinChannel</code> method takes care of joining
to the selected channel and loading the messages.</p>
</div><div data-title="Creating a Channel" data-file="twiliochat/ChannelManager.swift" data-highlight="122-143" class="step"><h2 id="creating-a-channel">Creating a Channel</h2>
<p>We use an input dialog so the user can type the name of the new channel.
The only restriction here, is that the user can&#39;t create a channel called
&quot;General Channel&quot;. Other than that, creating a channel is as simple as calling
<code>createChannelWithFriendlyName</code></p>
</div><div data-title="Deleting a Channel" data-file="twiliochat/MenuViewController.swift" data-highlight="163-178" class="step"><h2 id="deleting-a-channel">Deleting a Channel</h2>
<p>Deleting a channel is as simple as creating one. We&#39;ll use the <code>UITableView</code>
hability to delete a cell. Once you have figured out what channel is meant
to be deleted (from the selected cell index path), deleting it is as simple
as calling the channel&#39;s method <code>destroyWithCompletion</code>.</p>
</div><div data-title="Where to Next?" class="step"><h2 id="where-to-next-">Where to Next?</h2>
<p>That&#39;s it! We&#39;ve just implemented a simple chat application in objective-c.</p>
<p>Thanks for checking out this tutorial! If you have any feedback to share
with us, we&#39;d love to hear it. Tweet
<a href="http://twitter.com/twilio">@twilio</a> to let us know what you think.</p>
</div></div>
<div class="saurus-files" style="display:none;"><textarea class="saurus-file" data-file="twiliochat/AppDelegate.swift" data-mode="text">aW1wb3J0IFVJS2l0CmltcG9ydCBQYXJzZQoKQFVJQXBwbGljYXRpb25NYWluCmNsYXNzIEFwcERlbGVnYXRlOiBVSVJlc3BvbmRlciwgVUlBcHBsaWNhdGlvbkRlbGVnYXRlIHsKCiAgdmFyIHdpbmRvdzogVUlXaW5kb3c/CgoKICBmdW5jIGFwcGxpY2F0aW9uKGFwcGxpY2F0aW9uOiBVSUFwcGxpY2F0aW9uLCBkaWRGaW5pc2hMYXVuY2hpbmdXaXRoT3B0aW9ucyBsYXVuY2hPcHRpb25zOiBbTlNPYmplY3Q6IEFueU9iamVjdF0/KSAtPiBCb29sIHsKICAgIFBhcnNlLmVuYWJsZUxvY2FsRGF0YXN0b3JlKCkKCiAgICBpZiBsZXQgZmlsZVBhdGggPSBOU0J1bmRsZS5tYWluQnVuZGxlKCkucGF0aEZvclJlc291cmNlKCJLZXlzIiwgb2ZUeXBlOiJwbGlzdCIpLAogICAgICBkaWN0aW9uYXJ5ID0gTlNEaWN0aW9uYXJ5KGNvbnRlbnRzT2ZGaWxlOmZpbGVQYXRoKSBhcz8gW1N0cmluZzogQW55T2JqZWN0XSwKICAgICAgcGFyc2VBcHBsaWNhdGlvbklkID0gZGljdGlvbmFyeVsiUGFyc2VBcHBsaWNhdGlvbklkIl0gYXM/IFN0cmluZywKICAgICAgcGFyc2VDbGllbnRLZXkgPSBkaWN0aW9uYXJ5WyJQYXJzZUNsaWVudEtleSJdIGFzPyBTdHJpbmcgewogICAgICAgIFBhcnNlLnNldEFwcGxpY2F0aW9uSWQocGFyc2VBcHBsaWNhdGlvbklkLAogICAgICAgICAgY2xpZW50S2V5OnBhcnNlQ2xpZW50S2V5KQogICAgfQoKCiAgICBsZXQgZGVmYXVsdEFDTDogUEZBQ0wgPSBQRkFDTCgpCiAgICBkZWZhdWx0QUNMLnB1YmxpY1JlYWRBY2Nlc3MgPSB0cnVlCiAgICBQRkFDTC5zZXREZWZhdWx0QUNMKGRlZmF1bHRBQ0wsIHdpdGhBY2Nlc3NGb3JDdXJyZW50VXNlcjp0cnVlKQoKICAgIElQTWVzc2FnaW5nTWFuYWdlci5zaGFyZWRNYW5hZ2VyKCkucHJlc2VudExhdW5jaFNjcmVlbigpCiAgICBJUE1lc3NhZ2luZ01hbmFnZXIuc2hhcmVkTWFuYWdlcigpLnByZXNlbnRSb290Vmlld0NvbnRyb2xsZXIoKQogICAgcmV0dXJuIHRydWUKICB9CgogIGZ1bmMgYXBwbGljYXRpb25XaWxsUmVzaWduQWN0aXZlKGFwcGxpY2F0aW9uOiBVSUFwcGxpY2F0aW9uKSB7CiAgICAvLyBTZW50IHdoZW4gdGhlIGFwcGxpY2F0aW9uIGlzIGFib3V0IHRvIG1vdmUgZnJvbSBhY3RpdmUgdG8gaW5hY3RpdmUgc3RhdGUuIFRoaXMgY2FuIG9jY3VyIGZvciBjZXJ0YWluIHR5cGVzIG9mIHRlbXBvcmFyeSBpbnRlcnJ1cHRpb25zIChzdWNoIGFzIGFuIGluY29taW5nIHBob25lIGNhbGwgb3IgU01TIG1lc3NhZ2UpIG9yIHdoZW4gdGhlIHVzZXIgcXVpdHMgdGhlIGFwcGxpY2F0aW9uIGFuZCBpdCBiZWdpbnMgdGhlIHRyYW5zaXRpb24gdG8gdGhlIGJhY2tncm91bmQgc3RhdGUuCiAgICAvLyBVc2UgdGhpcyBtZXRob2QgdG8gcGF1c2Ugb25nb2luZyB0YXNrcywgZGlzYWJsZSB0aW1lcnMsIGFuZCB0aHJvdHRsZSBkb3duIE9wZW5HTCBFUyBmcmFtZSByYXRlcy4gR2FtZXMgc2hvdWxkIHVzZSB0aGlzIG1ldGhvZCB0byBwYXVzZSB0aGUgZ2FtZS4KICB9CgogIGZ1bmMgYXBwbGljYXRpb25EaWRFbnRlckJhY2tncm91bmQoYXBwbGljYXRpb246IFVJQXBwbGljYXRpb24pIHsKICAgIC8vIFVzZSB0aGlzIG1ldGhvZCB0byByZWxlYXNlIHNoYXJlZCByZXNvdXJjZXMsIHNhdmUgdXNlciBkYXRhLCBpbnZhbGlkYXRlIHRpbWVycywgYW5kIHN0b3JlIGVub3VnaCBhcHBsaWNhdGlvbiBzdGF0ZSBpbmZvcm1hdGlvbiB0byByZXN0b3JlIHlvdXIgYXBwbGljYXRpb24gdG8gaXRzIGN1cnJlbnQgc3RhdGUgaW4gY2FzZSBpdCBpcyB0ZXJtaW5hdGVkIGxhdGVyLgogICAgLy8gSWYgeW91ciBhcHBsaWNhdGlvbiBzdXBwb3J0cyBiYWNrZ3JvdW5kIGV4ZWN1dGlvbiwgdGhpcyBtZXRob2QgaXMgY2FsbGVkIGluc3RlYWQgb2YgYXBwbGljYXRpb25XaWxsVGVybWluYXRlOiB3aGVuIHRoZSB1c2VyIHF1aXRzLgogIH0KCiAgZnVuYyBhcHBsaWNhdGlvbldpbGxFbnRlckZvcmVncm91bmQoYXBwbGljYXRpb246IFVJQXBwbGljYXRpb24pIHsKICAgIC8vIENhbGxlZCBhcyBwYXJ0IG9mIHRoZSB0cmFuc2l0aW9uIGZyb20gdGhlIGJhY2tncm91bmQgdG8gdGhlIGluYWN0aXZlIHN0YXRlIGhlcmUgeW91IGNhbiB1bmRvIG1hbnkgb2YgdGhlIGNoYW5nZXMgbWFkZSBvbiBlbnRlcmluZyB0aGUgYmFja2dyb3VuZC4KICB9CgogIGZ1bmMgYXBwbGljYXRpb25EaWRCZWNvbWVBY3RpdmUoYXBwbGljYXRpb246IFVJQXBwbGljYXRpb24pIHsKICAgIC8vIFJlc3RhcnQgYW55IHRhc2tzIHRoYXQgd2VyZSBwYXVzZWQgKG9yIG5vdCB5ZXQgc3RhcnRlZCkgd2hpbGUgdGhlIGFwcGxpY2F0aW9uIHdhcyBpbmFjdGl2ZS4gSWYgdGhlIGFwcGxpY2F0aW9uIHdhcyBwcmV2aW91c2x5IGluIHRoZSBiYWNrZ3JvdW5kLCBvcHRpb25hbGx5IHJlZnJlc2ggdGhlIHVzZXIgaW50ZXJmYWNlLgogIH0KCiAgZnVuYyBhcHBsaWNhdGlvbldpbGxUZXJtaW5hdGUoYXBwbGljYXRpb246IFVJQXBwbGljYXRpb24pIHsKICAgIC8vIENhbGxlZCB3aGVuIHRoZSBhcHBsaWNhdGlvbiBpcyBhYm91dCB0byB0ZXJtaW5hdGUuIFNhdmUgZGF0YSBpZiBhcHByb3ByaWF0ZS4gU2VlIGFsc28gYXBwbGljYXRpb25EaWRFbnRlckJhY2tncm91bmQ6LgogIH0KCgp9Cgo=</textarea>
<textarea class="saurus-file" data-file="twiliochat/IPMessagingManager.swift" data-mode="text">aW1wb3J0IFVJS2l0CmltcG9ydCBQYXJzZQoKY2xhc3MgSVBNZXNzYWdpbmdNYW5hZ2VyOiBOU09iamVjdCwgVHdpbGlvQWNjZXNzTWFuYWdlckRlbGVnYXRlIHsKCiAgc3RhdGljIGxldCBfc2hhcmVkTWFuYWdlciA9IElQTWVzc2FnaW5nTWFuYWdlcigpCgogIHZhciBjbGllbnQ6VHdpbGlvSVBNZXNzYWdpbmdDbGllbnQ/CiAgdmFyIGNvbm5lY3RlZCA9IGZhbHNlCgogIHZhciB1c2VySWRlbnRpdHk6U3RyaW5nPyB7CiAgICByZXR1cm4gUEZVc2VyLmN1cnJlbnRVc2VyKCk/LnVzZXJuYW1lCiAgfQoKICB2YXIgaGFzSWRlbnRpdHk6IEJvb2wgewogICAgcmV0dXJuIFBGVXNlci5jdXJyZW50VXNlcigpICE9IG5pbCAmJiBQRlVzZXIuY3VycmVudFVzZXIoKSEuYXV0aGVudGljYXRlZAogIH0KCiAgY2xhc3MgZnVuYyBzaGFyZWRNYW5hZ2VyKCkgLT4gSVBNZXNzYWdpbmdNYW5hZ2VyIHsKICAgIHJldHVybiBfc2hhcmVkTWFuYWdlcgogIH0KCiAgZnVuYyBwcmVzZW50Um9vdFZpZXdDb250cm9sbGVyKCkgewogICAgaWYgKCFoYXNJZGVudGl0eSkgewogICAgICBwcmVzZW50Vmlld0NvbnRyb2xsZXJCeU5hbWUoIkxvZ2luVmlld0NvbnRyb2xsZXIiKQogICAgICByZXR1cm4KICAgIH0KCiAgICBpZiAoIWNvbm5lY3RlZCkgewogICAgICBjb25uZWN0Q2xpZW50V2l0aENvbXBsZXRpb24geyBzdWNjZXNzLCBlcnJvciBpbgogICAgICAgIGxldCB2aWV3Q29udHJvbGxlciA9IHN1Y2Nlc3MgPyAiUmV2ZWFsVmlld0NvbnRyb2xsZXIiIDogIkxvZ2luVmlld0NvbnRyb2xsZXIiCiAgICAgICAgc2VsZi5wcmVzZW50Vmlld0NvbnRyb2xsZXJCeU5hbWUodmlld0NvbnRyb2xsZXIpCiAgICAgIH0KICAgICAgcmV0dXJuCiAgICB9CgogICAgcHJlc2VudFZpZXdDb250cm9sbGVyQnlOYW1lKCJSZXZlYWxWaWV3Q29udHJvbGxlciIpCiAgfQoKICBmdW5jIHByZXNlbnRWaWV3Q29udHJvbGxlckJ5TmFtZSh2aWV3Q29udHJvbGxlcjogU3RyaW5nKSB7CiAgICBwcmVzZW50Vmlld0NvbnRyb2xsZXIoc3RvcnlCb2FyZFdpdGhOYW1lKCJNYWluIikuaW5zdGFudGlhdGVWaWV3Q29udHJvbGxlcldpdGhJZGVudGlmaWVyKHZpZXdDb250cm9sbGVyKSkKICB9CgogIGZ1bmMgcHJlc2VudExhdW5jaFNjcmVlbigpIHsKICAgIHByZXNlbnRWaWV3Q29udHJvbGxlcihzdG9yeUJvYXJkV2l0aE5hbWUoIkxhdW5jaFNjcmVlbiIpLmluc3RhbnRpYXRlSW5pdGlhbFZpZXdDb250cm9sbGVyKCkhKQogIH0KCiAgZnVuYyBwcmVzZW50Vmlld0NvbnRyb2xsZXIoY29udHJvbGxlcjogVUlWaWV3Q29udHJvbGxlcikgewogICAgbGV0IHdpbmRvdyA9IFVJQXBwbGljYXRpb24uc2hhcmVkQXBwbGljYXRpb24oKS5kZWxlZ2F0ZSEud2luZG93ISEKICAgIHdpbmRvdy5yb290Vmlld0NvbnRyb2xsZXIgPSBjb250cm9sbGVyCiAgfQoKICBmdW5jIHN0b3J5Qm9hcmRXaXRoTmFtZShuYW1lOlN0cmluZykgLT4gVUlTdG9yeWJvYXJkIHsKICAgIHJldHVybiBVSVN0b3J5Ym9hcmQobmFtZTpuYW1lLCBidW5kbGU6IE5TQnVuZGxlLm1haW5CdW5kbGUoKSkKICB9CgogIC8vIE1BUks6IFVzZXIgYW5kIHNlc3Npb24gbWFuYWdlbWVudAoKICBmdW5jIHJlZ2lzdGVyV2l0aFVzZXJuYW1lKHVzZXJuYW1lOiBTdHJpbmcsIHBhc3N3b3JkOiBTdHJpbmcsIGZ1bGxOYW1lOiBTdHJpbmcsCiAgICBlbWFpbDogU3RyaW5nLCBjb21wbGV0aW9uOiAoQm9vbCwgTlNFcnJvcj8pIC0+IFZvaWQpIHsKICAgICAgbGV0IHVzZXIgPSBQRlVzZXIoKQogICAgICB1c2VyLnVzZXJuYW1lID0gdXNlcm5hbWUKICAgICAgdXNlci5lbWFpbCA9IGVtYWlsCiAgICAgIHVzZXIucGFzc3dvcmQgPSBwYXNzd29yZAogICAgICB1c2VyWyJmdWxsTmFtZSJdID0gZnVsbE5hbWUKCiAgICAgIHVzZXIuc2lnblVwSW5CYWNrZ3JvdW5kV2l0aEJsb2NrIHsgc3VjY2VlZGVkLCBlcnJvciBpbgogICAgICAgIGlmIHN1Y2NlZWRlZCB7CiAgICAgICAgICBzZWxmLmNvbm5lY3RDbGllbnRXaXRoQ29tcGxldGlvbihjb21wbGV0aW9uKQogICAgICAgICAgcmV0dXJuCiAgICAgICAgfQogICAgICAgIGNvbXBsZXRpb24oc3VjY2VlZGVkLCBlcnJvcikKICAgICAgfQogIH0KCiAgZnVuYyBsb2dpbldpdGhVc2VybmFtZSh1c2VybmFtZTogU3RyaW5nLCBwYXNzd29yZDogU3RyaW5nLAogICAgY29tcGxldGlvbjogKEJvb2wsIE5TRXJyb3I/KSAtPiBWb2lkKSB7CiAgICAgIFBGVXNlci5sb2dJbldpdGhVc2VybmFtZUluQmFja2dyb3VuZCh1c2VybmFtZSwgcGFzc3dvcmQ6IHBhc3N3b3JkKSB7IHVzZXIsIGVycm9yIGluCiAgICAgICAgaWYgbGV0IGVycm9yID0gZXJyb3IgewogICAgICAgICAgY29tcGxldGlvbihmYWxzZSwgZXJyb3IpCiAgICAgICAgICByZXR1cm4KICAgICAgICB9CiAgICAgICAgc2VsZi5jb25uZWN0Q2xpZW50V2l0aENvbXBsZXRpb24oY29tcGxldGlvbikKICAgICAgfQogIH0KCiAgZnVuYyBsb2dvdXQoKSB7CiAgICBQRlVzZXIubG9nT3V0KCkKICAgIGRpc3BhdGNoX2FzeW5jKGRpc3BhdGNoX2dldF9nbG9iYWxfcXVldWUoRElTUEFUQ0hfUVVFVUVfUFJJT1JJVFlfREVGQVVMVCwgMCkpIHsKICAgICAgc2VsZi5jbGllbnQ/LnNodXRkb3duKCkKICAgICAgc2VsZi5jbGllbnQgPSBuaWwKICAgIH0KICAgIHNlbGYuY29ubmVjdGVkID0gZmFsc2UKICB9CgogIC8vIE1BUks6IFR3aWxpbyBDbGllbnQKCiAgZnVuYyBjb25uZWN0Q2xpZW50V2l0aENvbXBsZXRpb24oY29tcGxldGlvbjogKEJvb2wsIE5TRXJyb3I/KSAtPiBWb2lkKSB7CiAgICBpZiAoY2xpZW50ICE9IG5pbCkgewogICAgICBsb2dvdXQoKQogICAgfQoKICAgIHJlcXVlc3RUb2tlbldpdGhDb21wbGV0aW9uIHsgc3VjY2VlZGVkLCB0b2tlbiBpbgogICAgICBpZiBsZXQgdG9rZW4gPSB0b2tlbiB3aGVyZSBzdWNjZWVkZWQgewogICAgICAgIHNlbGYuaW5pdGlhbGl6ZUNsaWVudFdpdGhUb2tlbih0b2tlbikKICAgICAgICBzZWxmLmxvYWRHZW5lcmFsQ2hhdFJvb21XaXRoQ29tcGxldGlvbihjb21wbGV0aW9uKQogICAgICB9CiAgICAgIGVsc2UgewogICAgICAgIGxldCBlcnJvciA9IHNlbGYuZXJyb3JXaXRoRGVzY3JpcHRpb24oIkNvdWxkIG5vdCBnZXQgYWNjZXNzIHRva2VuIiwgY29kZTozMDEpCiAgICAgICAgY29tcGxldGlvbihzdWNjZWVkZWQsIGVycm9yKQogICAgICB9CiAgICB9CiAgfQoKICBmdW5jIGluaXRpYWxpemVDbGllbnRXaXRoVG9rZW4odG9rZW46IFN0cmluZykgewogICAgbGV0IGFjY2Vzc01hbmFnZXIgPSBUd2lsaW9BY2Nlc3NNYW5hZ2VyKHRva2VuOnRva2VuLCBkZWxlZ2F0ZTpzZWxmKQogICAgY2xpZW50ID0gVHdpbGlvSVBNZXNzYWdpbmdDbGllbnQuaXBNZXNzYWdpbmdDbGllbnRXaXRoQWNjZXNzTWFuYWdlcihhY2Nlc3NNYW5hZ2VyLCBkZWxlZ2F0ZTogbmlsKQogIH0KCiAgZnVuYyBsb2FkR2VuZXJhbENoYXRSb29tV2l0aENvbXBsZXRpb24oY29tcGxldGlvbjooQm9vbCwgTlNFcnJvcj8pIC0+IFZvaWQpIHsKICAgIENoYW5uZWxNYW5hZ2VyLnNoYXJlZE1hbmFnZXIuam9pbkdlbmVyYWxDaGF0Um9vbVdpdGhDb21wbGV0aW9uIHsgc3VjY2VlZGVkIGluCiAgICAgIGlmIHN1Y2NlZWRlZCB7CiAgICAgICAgc2VsZi5jb25uZWN0ZWQgPSB0cnVlCiAgICAgICAgY29tcGxldGlvbihzdWNjZWVkZWQsIG5pbCkKICAgICAgfQogICAgICBlbHNlIHsKICAgICAgICBsZXQgZXJyb3IgPSBzZWxmLmVycm9yV2l0aERlc2NyaXB0aW9uKCJDb3VsZCBub3Qgam9pbiBHZW5lcmFsIGNoYW5uZWwiLCBjb2RlOiAzMDApCiAgICAgICAgY29tcGxldGlvbihzdWNjZWVkZWQsIGVycm9yKQogICAgICB9CiAgICB9CiAgfQoKICBmdW5jIHJlcXVlc3RUb2tlbldpdGhDb21wbGV0aW9uKGNvbXBsZXRpb246KEJvb2wsIFN0cmluZz8pIC0+IFZvaWQpIHsKICAgIGlmIGxldCBkZXZpY2UgPSBVSURldmljZS5jdXJyZW50RGV2aWNlKCkuaWRlbnRpZmllckZvclZlbmRvcj8uVVVJRFN0cmluZyB7CiAgICAgIFBGQ2xvdWQuY2FsbEZ1bmN0aW9uSW5CYWNrZ3JvdW5kKAogICAgICAgICJ0b2tlbiIsCiAgICAgICAgd2l0aFBhcmFtZXRlcnM6IFsiZGV2aWNlIjogZGV2aWNlXSkgeyByZXN1bHRzLCBlcnJvciBpbgogICAgICAgICAgdmFyIHRva2VuOiBTdHJpbmc/CiAgICAgICAgICBpZiBsZXQgcGFyYW1zID0gcmVzdWx0cyBhcz8gTlNEaWN0aW9uYXJ5IHdoZXJlIGVycm9yID09IG5pbCB7CiAgICAgICAgICAgIHRva2VuID0gcGFyYW1zWyJ0b2tlbiJdIGFzPyBTdHJpbmcKICAgICAgICAgIH0KICAgICAgICAgIGNvbXBsZXRpb24odG9rZW4gIT0gbmlsLCB0b2tlbikKICAgICAgfQogICAgfQogIH0KCiAgZnVuYyBlcnJvcldpdGhEZXNjcmlwdGlvbihkZXNjcmlwdGlvbjogU3RyaW5nLCBjb2RlOiBJbnQpIC0+IE5TRXJyb3IgewogICAgbGV0IHVzZXJJbmZvID0gW05TTG9jYWxpemVkRGVzY3JpcHRpb25LZXkgOiBkZXNjcmlwdGlvbl0KICAgIHJldHVybiBOU0Vycm9yKGRvbWFpbjogImFwcCIsIGNvZGU6IGNvZGUsIHVzZXJJbmZvOiB1c2VySW5mbykKICB9CgogIC8vIE1BUks6IFR3aWxpb0FjY2Vzc01hbmFnZXJEZWxlZ2F0ZQoKICBmdW5jIGFjY2Vzc01hbmFnZXJUb2tlbkV4cGlyZWQoYWNjZXNzTWFuYWdlcjogVHdpbGlvQWNjZXNzTWFuYWdlciEpIHsKICAgIHJlcXVlc3RUb2tlbldpdGhDb21wbGV0aW9uIHsgc3VjY2VlZGVkLCB0b2tlbiBpbgogICAgICBpZiAoc3VjY2VlZGVkKSB7CiAgICAgICAgYWNjZXNzTWFuYWdlci51cGRhdGVUb2tlbih0b2tlbikKICAgICAgfQogICAgICBlbHNlIHsKICAgICAgICBwcmludCgiRXJyb3Igd2hpbGUgdHJ5aW5nIHRvIGdldCBuZXcgYWNjZXNzIHRva2VuIikKICAgICAgfQogICAgfQogIH0KCiAgZnVuYyBhY2Nlc3NNYW5hZ2VyKGFjY2Vzc01hbmFnZXI6IFR3aWxpb0FjY2Vzc01hbmFnZXIhLCBlcnJvcjogTlNFcnJvciEpIHsKICAgIHByaW50KCJBY2Nlc3MgbWFuYWdlciBlcnJvcjogXChlcnJvci5sb2NhbGl6ZWREZXNjcmlwdGlvbikiKQogIH0KfQo=</textarea>
<textarea class="saurus-file" data-file="twiliochat/ChannelManager.swift" data-mode="text">Y2xhc3MgQ2hhbm5lbE1hbmFnZXI6IE5TT2JqZWN0IHsKICBzdGF0aWMgbGV0IHNoYXJlZE1hbmFnZXIgPSBDaGFubmVsTWFuYWdlcigpCgogIHN0YXRpYyBsZXQgZGVmYXVsdENoYW5uZWxVbmlxdWVOYW1lID0gImdlbmVyYWwiCiAgc3RhdGljIGxldCBkZWZhdWx0Q2hhbm5lbE5hbWUgPSAiR2VuZXJhbCBDaGFubmVsIgoKICB3ZWFrIHZhciBkZWxlZ2F0ZTpUd2lsaW9JUE1lc3NhZ2luZ0NsaWVudERlbGVnYXRlPwoKICB2YXIgY2hhbm5lbHNMaXN0OlRXTUNoYW5uZWxzPwogIHZhciBjaGFubmVsczpOU011dGFibGVPcmRlcmVkU2V0PwogIHZhciBnZW5lcmFsQ2hhbm5lbDpUV01DaGFubmVsIQoKICBvdmVycmlkZSBpbml0KCkgewogICAgc3VwZXIuaW5pdCgpCiAgICBJUE1lc3NhZ2luZ01hbmFnZXIuc2hhcmVkTWFuYWdlcigpLmNsaWVudD8uZGVsZWdhdGUgPSBzZWxmCiAgfQoKICAvLyBNQVJLOiAtIEdlbmVyYWwgY2hhbm5lbAoKICBmdW5jIGpvaW5HZW5lcmFsQ2hhdFJvb21XaXRoQ29tcGxldGlvbihjb21wbGV0aW9uOiBCb29sIC0+IFZvaWQpIHsKICAgIHBvcHVsYXRlQ2hhbm5lbHNXaXRoQ29tcGxldGlvbiB7IHN1Y2NlZWRlZCBpbgogICAgICBsZXQgdW5pcXVlTmFtZSA9IENoYW5uZWxNYW5hZ2VyLmRlZmF1bHRDaGFubmVsVW5pcXVlTmFtZQogICAgICBpZiBsZXQgY2hhbm5lbHNMaXN0ID0gc2VsZi5jaGFubmVsc0xpc3QgewogICAgICAgIHNlbGYuZ2VuZXJhbENoYW5uZWwgPSBjaGFubmVsc0xpc3QuY2hhbm5lbFdpdGhVbmlxdWVOYW1lKHVuaXF1ZU5hbWUpCiAgICAgIH0KCiAgICAgIGlmIHNlbGYuZ2VuZXJhbENoYW5uZWwgIT0gbmlsIHsKICAgICAgICBzZWxmLmpvaW5HZW5lcmFsQ2hhdFJvb21XaXRoVW5pcXVlTmFtZShuaWwsIGNvbXBsZXRpb246IGNvbXBsZXRpb24pCiAgICAgICAgcmV0dXJuCiAgICAgIH0KCiAgICAgIHNlbGYuY3JlYXRlR2VuZXJhbENoYXRSb29tV2l0aENvbXBsZXRpb24geyBzdWNjZWVkZWQgaW4KICAgICAgICBpZiAoc3VjY2VlZGVkKSB7CiAgICAgICAgICBzZWxmLmpvaW5HZW5lcmFsQ2hhdFJvb21XaXRoVW5pcXVlTmFtZSh1bmlxdWVOYW1lLCBjb21wbGV0aW9uOiBjb21wbGV0aW9uKQogICAgICAgICAgcmV0dXJuCiAgICAgICAgfQoKICAgICAgICBjb21wbGV0aW9uKGZhbHNlKQogICAgICB9CiAgICB9CiAgfQoKICBmdW5jIGpvaW5HZW5lcmFsQ2hhdFJvb21XaXRoVW5pcXVlTmFtZShuYW1lOiBTdHJpbmc/LCBjb21wbGV0aW9uOiBCb29sIC0+IFZvaWQpIHsKICAgIGdlbmVyYWxDaGFubmVsLmpvaW5XaXRoQ29tcGxldGlvbiB7IHJlc3VsdCBpbgogICAgICBpZiAocmVzdWx0ID09IC5TdWNjZXNzICYmIG5hbWUgIT0gbmlsKSB7CiAgICAgICAgc2VsZi5zZXRHZW5lcmFsQ2hhdFJvb21VbmlxdWVOYW1lV2l0aENvbXBsZXRpb24oY29tcGxldGlvbikKICAgICAgICByZXR1cm4KICAgICAgfQogICAgICBjb21wbGV0aW9uKHJlc3VsdCA9PSAuU3VjY2VzcykKICAgIH0KICB9CgogIGZ1bmMgY3JlYXRlR2VuZXJhbENoYXRSb29tV2l0aENvbXBsZXRpb24oY29tcGxldGlvbjogQm9vbCAtPiBWb2lkKSB7CiAgICBsZXQgY2hhbm5lbE5hbWUgPSBDaGFubmVsTWFuYWdlci5kZWZhdWx0Q2hhbm5lbE5hbWUKICAgIGNoYW5uZWxzTGlzdCEuY3JlYXRlQ2hhbm5lbFdpdGhGcmllbmRseU5hbWUoY2hhbm5lbE5hbWUsIHR5cGU6IC5QdWJsaWMpIHsgcmVzdWx0LCBjaGFubmVsIGluCiAgICAgIGlmIChyZXN1bHQgPT0gLlN1Y2Nlc3MpIHsKICAgICAgICBzZWxmLmdlbmVyYWxDaGFubmVsID0gY2hhbm5lbAogICAgICB9CiAgICAgIGNvbXBsZXRpb24ocmVzdWx0ID09IC5TdWNjZXNzKQogICAgfQogIH0KCiAgZnVuYyBzZXRHZW5lcmFsQ2hhdFJvb21VbmlxdWVOYW1lV2l0aENvbXBsZXRpb24oY29tcGxldGlvbjpCb29sIC0+IFZvaWQpIHsKICAgIGdlbmVyYWxDaGFubmVsLnNldFVuaXF1ZU5hbWUoQ2hhbm5lbE1hbmFnZXIuZGVmYXVsdENoYW5uZWxVbmlxdWVOYW1lKSB7IHJlc3VsdCBpbgogICAgICBjb21wbGV0aW9uKHJlc3VsdCA9PSAuU3VjY2VzcykKICAgIH0KICB9CgogIC8vIE1BUks6IC0gUG9wdWxhdGUgY2hhbm5lbHMKCiAgZnVuYyBwb3B1bGF0ZUNoYW5uZWxzV2l0aENvbXBsZXRpb24oY29tcGxldGlvbjogQm9vbCAtPiBWb2lkKSB7CiAgICBjaGFubmVscyA9IG5pbAoKICAgIGxvYWRDaGFubmVsTGlzdFdpdGhDb21wbGV0aW9uIHsgc3VjY2VlZGVkLCBjaGFubmVsTGlzdCBpbgogICAgICBpZiAoIXN1Y2NlZWRlZCkgewogICAgICAgIGRpc3BhdGNoX2FzeW5jKGRpc3BhdGNoX2dldF9tYWluX3F1ZXVlKCksIHsKICAgICAgICAgIHNlbGYuY2hhbm5lbHNMaXN0ID0gbmlsCiAgICAgICAgICBzZWxmLmNoYW5uZWxzID0gbmlsCiAgICAgICAgICBjb21wbGV0aW9uKGZhbHNlKQogICAgICAgIH0pCiAgICAgICAgcmV0dXJuCiAgICAgIH0KCiAgICAgIGRpc3BhdGNoX2FzeW5jKGRpc3BhdGNoX2dldF9nbG9iYWxfcXVldWUoRElTUEFUQ0hfUVVFVUVfUFJJT1JJVFlfREVGQVVMVCwgMCkpIHsKICAgICAgICBjaGFubmVsTGlzdCEubG9hZENoYW5uZWxzV2l0aENvbXBsZXRpb24geyByZXN1bHQgaW4KICAgICAgICAgIGlmIChyZXN1bHQgPT0gLlN1Y2Nlc3MpIHsKICAgICAgICAgICAgc2VsZi5jaGFubmVscyA9IE5TTXV0YWJsZU9yZGVyZWRTZXQoKQogICAgICAgICAgICBzZWxmLmNoYW5uZWxzIS5hZGRPYmplY3RzRnJvbUFycmF5KGNoYW5uZWxMaXN0IS5hbGxPYmplY3RzKCkpCiAgICAgICAgICAgIHNlbGYuc29ydENoYW5uZWxzKCkKICAgICAgICAgIH0KICAgICAgICAgIGRpc3BhdGNoX2FzeW5jKGRpc3BhdGNoX2dldF9tYWluX3F1ZXVlKCkpIHsKICAgICAgICAgICAgY29tcGxldGlvbihyZXN1bHQgPT0gLlN1Y2Nlc3MpCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQoKICBmdW5jIGxvYWRDaGFubmVsTGlzdFdpdGhDb21wbGV0aW9uKGNvbXBsZXRpb246IChCb29sLCBUV01DaGFubmVscz8pIC0+IFZvaWQpIHsKICAgIHNlbGYuY2hhbm5lbHNMaXN0ID0gbmlsCgogICAgZGlzcGF0Y2hfYXN5bmMoZGlzcGF0Y2hfZ2V0X2dsb2JhbF9xdWV1ZShESVNQQVRDSF9RVUVVRV9QUklPUklUWV9ERUZBVUxULCAwKSkgewogICAgICBJUE1lc3NhZ2luZ01hbmFnZXIuc2hhcmVkTWFuYWdlcigpLmNsaWVudCEuY2hhbm5lbHNMaXN0V2l0aENvbXBsZXRpb24geyByZXN1bHQsIGNoYW5uZWxzTGlzdCBpbgogICAgICAgIGlmIChyZXN1bHQgPT0gLlN1Y2Nlc3MpIHsKICAgICAgICAgIHNlbGYuY2hhbm5lbHNMaXN0ID0gY2hhbm5lbHNMaXN0CiAgICAgICAgfQogICAgICAgIGRpc3BhdGNoX2FzeW5jKGRpc3BhdGNoX2dldF9tYWluX3F1ZXVlKCksIHsKICAgICAgICAgIGNvbXBsZXRpb24ocmVzdWx0ID09IC5TdWNjZXNzLCBzZWxmLmNoYW5uZWxzTGlzdCkKICAgICAgICB9KQogICAgICB9CiAgICB9CiAgfQoKICBmdW5jIHNvcnRDaGFubmVscygpIHsKICAgIGxldCBzb3J0U2VsZWN0b3IgPSBTZWxlY3RvcigibG9jYWxpemVkQ2FzZUluc2Vuc2l0aXZlQ29tcGFyZToiKQogICAgbGV0IGRlc2NyaXB0b3IgPSBOU1NvcnREZXNjcmlwdG9yKGtleTogImZyaWVuZGx5TmFtZSIsIGFzY2VuZGluZzogdHJ1ZSwgc2VsZWN0b3I6IHNvcnRTZWxlY3RvcikKICAgIGNoYW5uZWxzIS5zb3J0VXNpbmdEZXNjcmlwdG9ycyhbZGVzY3JpcHRvcl0pCiAgfQoKICAvLyBNQVJLOiAtIENyZWF0ZSBjaGFubmVsCgogIGZ1bmMgY3JlYXRlQ2hhbm5lbFdpdGhOYW1lKG5hbWU6IFN0cmluZywgY29tcGxldGlvbjogKEJvb2wsIFRXTUNoYW5uZWw/KSAtPiBWb2lkKSB7CiAgICBpZiAobmFtZSA9PSBDaGFubmVsTWFuYWdlci5kZWZhdWx0Q2hhbm5lbE5hbWUpIHsKICAgICAgY29tcGxldGlvbihmYWxzZSwgbmlsKQogICAgICByZXR1cm4KICAgIH0KCiAgICBpZiAoY2hhbm5lbHNMaXN0ID09IG5pbCkKICAgIHsKICAgICAgbG9hZENoYW5uZWxMaXN0V2l0aENvbXBsZXRpb24geyBzdWNjZWVkZWQsIGNoYW5uZWxzTGlzdCBpbgogICAgICAgIGlmIChzdWNjZWVkZWQpIHsKICAgICAgICAgIHNlbGYuY3JlYXRlQ2hhbm5lbFdpdGhOYW1lKG5hbWUsIGNvbXBsZXRpb246IGNvbXBsZXRpb24pCiAgICAgICAgICByZXR1cm4KICAgICAgICB9CiAgICAgICAgY29tcGxldGlvbihzdWNjZWVkZWQsIG5pbCkKICAgICAgfQogICAgICByZXR1cm4KICAgIH0KCiAgICBzZWxmLmNoYW5uZWxzTGlzdD8uY3JlYXRlQ2hhbm5lbFdpdGhGcmllbmRseU5hbWUobmFtZSwgdHlwZTogLlB1YmxpYykgeyByZXN1bHQsIGNoYW5uZWwgaW4KICAgICAgY29tcGxldGlvbihyZXN1bHQgPT0gLlN1Y2Nlc3MsIGNoYW5uZWwpCiAgICB9CiAgfQp9CgovLyBNQVJLOiAtIFR3aWxpb0lQTWVzc2FnaW5nQ2xpZW50RGVsZWdhdGUKZXh0ZW5zaW9uIENoYW5uZWxNYW5hZ2VyIDogVHdpbGlvSVBNZXNzYWdpbmdDbGllbnREZWxlZ2F0ZSB7CiAgZnVuYyBpcE1lc3NhZ2luZ0NsaWVudChjbGllbnQ6IFR3aWxpb0lQTWVzc2FnaW5nQ2xpZW50ISwgY2hhbm5lbEFkZGVkIGNoYW5uZWw6IFRXTUNoYW5uZWwhKSB7CiAgICBkaXNwYXRjaF9hc3luYyhkaXNwYXRjaF9nZXRfbWFpbl9xdWV1ZSgpLCB7CiAgICAgIGlmIHNlbGYuY2hhbm5lbHMgIT0gbmlsIHsKICAgICAgICBzZWxmLmNoYW5uZWxzIS5hZGRPYmplY3QoY2hhbm5lbCkKICAgICAgICBzZWxmLnNvcnRDaGFubmVscygpCiAgICAgICAgc2VsZi5kZWxlZ2F0ZT8uaXBNZXNzYWdpbmdDbGllbnQ/KGNsaWVudCwgY2hhbm5lbEFkZGVkOiBjaGFubmVsKQogICAgICB9CiAgICB9KQogIH0KCiAgZnVuYyBpcE1lc3NhZ2luZ0NsaWVudChjbGllbnQ6IFR3aWxpb0lQTWVzc2FnaW5nQ2xpZW50ISwgY2hhbm5lbENoYW5nZWQgY2hhbm5lbDogVFdNQ2hhbm5lbCEpIHsKICAgIGRpc3BhdGNoX2FzeW5jKGRpc3BhdGNoX2dldF9tYWluX3F1ZXVlKCksIHsKICAgICAgaWYgc2VsZi5jaGFubmVscyAhPSBuaWwgewogICAgICAgIHNlbGYuZGVsZWdhdGU/LmlwTWVzc2FnaW5nQ2xpZW50PyhjbGllbnQsIGNoYW5uZWxDaGFuZ2VkOiBjaGFubmVsKQogICAgICB9CiAgICB9KQogIH0KCiAgZnVuYyBpcE1lc3NhZ2luZ0NsaWVudChjbGllbnQ6IFR3aWxpb0lQTWVzc2FnaW5nQ2xpZW50ISwgY2hhbm5lbERlbGV0ZWQgY2hhbm5lbDogVFdNQ2hhbm5lbCEpIHsKICAgIGRpc3BhdGNoX2FzeW5jKGRpc3BhdGNoX2dldF9tYWluX3F1ZXVlKCksIHsKICAgICAgaWYgc2VsZi5jaGFubmVscyAhPSBuaWwgewogICAgICAgIHNlbGYuY2hhbm5lbHM/LnJlbW92ZU9iamVjdChjaGFubmVsKQogICAgICAgIHNlbGYuZGVsZWdhdGU/LmlwTWVzc2FnaW5nQ2xpZW50PyhjbGllbnQsIGNoYW5uZWxEZWxldGVkOiBjaGFubmVsKQogICAgICB9CiAgICB9KQogIH0KfQo=</textarea>
<textarea class="saurus-file" data-file="twiliochat/MainChatViewController.swift" data-mode="text">aW1wb3J0IFVJS2l0CmltcG9ydCBTV1JldmVhbFZpZXdDb250cm9sbGVyCmltcG9ydCBTbGFja1RleHRWaWV3Q29udHJvbGxlcgoKY2xhc3MgTWFpbkNoYXRWaWV3Q29udHJvbGxlcjogU0xLVGV4dFZpZXdDb250cm9sbGVyIHsKICBzdGF0aWMgbGV0IFRXQ0NoYXRDZWxsSWRlbnRpZmllciA9ICJDaGF0VGFibGVDZWxsIgogIHN0YXRpYyBsZXQgVFdDQ2hhdFN0YXR1c0NlbGxJZGVudGlmaWVyID0gIkNoYXRTdGF0dXNUYWJsZUNlbGwiCgogIHN0YXRpYyBsZXQgVFdDT3BlbkdlbmVyYWxDaGFubmVsU2VndWUgPSAiT3BlbkdlbmVyYWxDaGF0IgogIHN0YXRpYyBsZXQgVFdDTGFiZWxUYWcgPSAyMDAKCiAgdmFyIF9jaGFubmVsOlRXTUNoYW5uZWwhCiAgdmFyIGNoYW5uZWw6VFdNQ2hhbm5lbCEgewogICAgZ2V0IHsKICAgICAgcmV0dXJuIF9jaGFubmVsCiAgICB9CiAgICBzZXQoY2hhbm5lbCkgewogICAgICBfY2hhbm5lbCA9IGNoYW5uZWwKICAgICAgdGl0bGUgPSBfY2hhbm5lbC5mcmllbmRseU5hbWUKICAgICAgX2NoYW5uZWwuZGVsZWdhdGUgPSBzZWxmCgogICAgICBpZiBfY2hhbm5lbCA9PSBDaGFubmVsTWFuYWdlci5zaGFyZWRNYW5hZ2VyLmdlbmVyYWxDaGFubmVsIHsKICAgICAgICBuYXZpZ2F0aW9uSXRlbS5yaWdodEJhckJ1dHRvbkl0ZW0gPSBuaWwKICAgICAgfQoKICAgICAgam9pbkNoYW5uZWwoKQogICAgfQogIH0KCiAgdmFyIG1lc3NhZ2VzOlNldDxUV01NZXNzYWdlPiA9IFNldDxUV01NZXNzYWdlPigpCiAgdmFyIHNvcnRlZE1lc3NhZ2VzOltUV01NZXNzYWdlXSEKCiAgQElCT3V0bGV0IHdlYWsgdmFyIHJldmVhbEJ1dHRvbkl0ZW06IFVJQmFyQnV0dG9uSXRlbSEKICBASUJPdXRsZXQgd2VhayB2YXIgYWN0aW9uQnV0dG9uSXRlbTogVUlCYXJCdXR0b25JdGVtIQoKICBvdmVycmlkZSBmdW5jIHZpZXdEaWRMb2FkKCkgewogICAgc3VwZXIudmlld0RpZExvYWQoKQoKICAgIGlmIChyZXZlYWxWaWV3Q29udHJvbGxlcigpICE9IG5pbCkgewogICAgICByZXZlYWxCdXR0b25JdGVtLnRhcmdldCA9IHJldmVhbFZpZXdDb250cm9sbGVyKCkKICAgICAgcmV2ZWFsQnV0dG9uSXRlbS5hY3Rpb24gPSAicmV2ZWFsVG9nZ2xlOiIKICAgICAgbmF2aWdhdGlvbkNvbnRyb2xsZXI/Lm5hdmlnYXRpb25CYXIuYWRkR2VzdHVyZVJlY29nbml6ZXIocmV2ZWFsVmlld0NvbnRyb2xsZXIoKS5wYW5HZXN0dXJlUmVjb2duaXplcigpKQogICAgICByZXZlYWxWaWV3Q29udHJvbGxlcigpLnJlYXJWaWV3UmV2ZWFsT3ZlcmRyYXcgPSAwCiAgICB9CgogICAgYm91bmNlcyA9IHRydWUKICAgIHNoYWtlVG9DbGVhckVuYWJsZWQgPSB0cnVlCiAgICBrZXlib2FyZFBhbm5pbmdFbmFibGVkID0gdHJ1ZQogICAgc2hvdWxkU2Nyb2xsVG9Cb3R0b21BZnRlcktleWJvYXJkU2hvd3MgPSBmYWxzZQogICAgaW52ZXJ0ZWQgPSB0cnVlCgogICAgbGV0IGNlbGxOaWIgPSBVSU5pYihuaWJOYW1lOiBNYWluQ2hhdFZpZXdDb250cm9sbGVyLlRXQ0NoYXRDZWxsSWRlbnRpZmllciwgYnVuZGxlOiBuaWwpCiAgICB0YWJsZVZpZXcucmVnaXN0ZXJOaWIoY2VsbE5pYiwgZm9yQ2VsbFJldXNlSWRlbnRpZmllcjpNYWluQ2hhdFZpZXdDb250cm9sbGVyLlRXQ0NoYXRDZWxsSWRlbnRpZmllcikKCiAgICBsZXQgY2VsbFN0YXR1c05pYiA9IFVJTmliKG5pYk5hbWU6IE1haW5DaGF0Vmlld0NvbnRyb2xsZXIuVFdDQ2hhdFN0YXR1c0NlbGxJZGVudGlmaWVyLCBidW5kbGU6IG5pbCkKICAgIHRhYmxlVmlldy5yZWdpc3Rlck5pYihjZWxsU3RhdHVzTmliLCBmb3JDZWxsUmV1c2VJZGVudGlmaWVyOk1haW5DaGF0Vmlld0NvbnRyb2xsZXIuVFdDQ2hhdFN0YXR1c0NlbGxJZGVudGlmaWVyKQoKICAgIHRleHRJbnB1dGJhci5hdXRvSGlkZVJpZ2h0QnV0dG9uID0gdHJ1ZQogICAgdGV4dElucHV0YmFyLm1heENoYXJDb3VudCA9IDI1NgogICAgdGV4dElucHV0YmFyLmNvdW50ZXJTdHlsZSA9IC5TcGxpdAogICAgdGV4dElucHV0YmFyLmNvdW50ZXJQb3NpdGlvbiA9IC5Ub3AKCiAgICBsZXQgZm9udCA9IFVJRm9udChuYW1lOiJBdmVuaXItTGlnaHQiLCBzaXplOjE0KQogICAgdGV4dFZpZXcuZm9udCA9IGZvbnQKCiAgICByaWdodEJ1dHRvbi5zZXRUaXRsZUNvbG9yKFVJQ29sb3IocmVkOjAuOTczLCBncmVlbjowLjU1NywgYmx1ZTowLjUwMiwgYWxwaGE6MSksIGZvclN0YXRlOiAuTm9ybWFsKQoKICAgIGlmIGxldCBmb250ID0gVUlGb250KG5hbWU6IkF2ZW5pci1IZWF2eSIsIHNpemU6MTcpIHsKICAgICAgbmF2aWdhdGlvbkNvbnRyb2xsZXI/Lm5hdmlnYXRpb25CYXIudGl0bGVUZXh0QXR0cmlidXRlcyA9IFtOU0ZvbnRBdHRyaWJ1dGVOYW1lOiBmb250XQogICAgfQoKICAgIHRhYmxlVmlldy5hbGxvd3NTZWxlY3Rpb24gPSBmYWxzZQogICAgdGFibGVWaWV3LmVzdGltYXRlZFJvd0hlaWdodCA9IDcwCiAgICB0YWJsZVZpZXcucm93SGVpZ2h0ID0gVUlUYWJsZVZpZXdBdXRvbWF0aWNEaW1lbnNpb24KICAgIHRhYmxlVmlldy5zZXBhcmF0b3JTdHlsZSA9IC5Ob25lCgogICAgaWYgY2hhbm5lbCA9PSBuaWwgewogICAgICBjaGFubmVsID0gQ2hhbm5lbE1hbmFnZXIuc2hhcmVkTWFuYWdlci5nZW5lcmFsQ2hhbm5lbAogICAgfQogIH0KCiAgb3ZlcnJpZGUgZnVuYyB2aWV3RGlkQXBwZWFyKGFuaW1hdGVkOiBCb29sKSB7CiAgICBzdXBlci52aWV3RGlkQXBwZWFyKGFuaW1hdGVkKQogICAgc2Nyb2xsVG9Cb3R0b20oKQogIH0KCiAgb3ZlcnJpZGUgZnVuYyBudW1iZXJPZlNlY3Rpb25zSW5UYWJsZVZpZXcodGFibGVWaWV3OiBVSVRhYmxlVmlldykgLT4gSW50IHsKICAgIHJldHVybiAxCiAgfQoKICBvdmVycmlkZSBmdW5jIHRhYmxlVmlldyh0YWJsZVZpZXc6IFVJVGFibGVWaWV3LCBudW1iZXJPZlJvd3NJblNlY3Rpb24gc2VjdGlvbjogTlNJbnRlZ2VyKSAtPiBJbnQgewogICAgcmV0dXJuIG1lc3NhZ2VzLmNvdW50CiAgfQoKICBvdmVycmlkZSBmdW5jIHRhYmxlVmlldyh0YWJsZVZpZXc6IFVJVGFibGVWaWV3LCBjZWxsRm9yUm93QXRJbmRleFBhdGggaW5kZXhQYXRoOiBOU0luZGV4UGF0aCkgLT4gVUlUYWJsZVZpZXdDZWxsIHsKICAgIHZhciBjZWxsOlVJVGFibGVWaWV3Q2VsbAoKICAgIGxldCBtZXNzYWdlID0gc29ydGVkTWVzc2FnZXNbaW5kZXhQYXRoLnJvd10KCiAgICBpZiBsZXQgc3RhdHVzTWVzc2FnZSA9IG1lc3NhZ2UgYXM/IFN0YXR1c01lc3NhZ2UgewogICAgICBjZWxsID0gZ2V0U3RhdHVzQ2VsbEZvclRhYmxlVmlldyh0YWJsZVZpZXcsIGZvckluZGV4UGF0aDppbmRleFBhdGgsIG1lc3NhZ2U6c3RhdHVzTWVzc2FnZSkKICAgIH0KICAgIGVsc2UgewogICAgICBjZWxsID0gZ2V0Q2hhdENlbGxGb3JUYWJsZVZpZXcodGFibGVWaWV3LCBmb3JJbmRleFBhdGg6aW5kZXhQYXRoLCBtZXNzYWdlOm1lc3NhZ2UpCiAgICB9CgogICAgY2VsbC50cmFuc2Zvcm0gPSB0YWJsZVZpZXcudHJhbnNmb3JtCiAgICByZXR1cm4gY2VsbAogIH0KCiAgZnVuYyBnZXRDaGF0Q2VsbEZvclRhYmxlVmlldyh0YWJsZVZpZXc6IFVJVGFibGVWaWV3LCBmb3JJbmRleFBhdGggaW5kZXhQYXRoOk5TSW5kZXhQYXRoLCBtZXNzYWdlOiBUV01NZXNzYWdlKSAtPiBVSVRhYmxlVmlld0NlbGwgewogICAgbGV0IGNlbGwgPSB0YWJsZVZpZXcuZGVxdWV1ZVJldXNhYmxlQ2VsbFdpdGhJZGVudGlmaWVyKE1haW5DaGF0Vmlld0NvbnRyb2xsZXIuVFdDQ2hhdENlbGxJZGVudGlmaWVyLCBmb3JJbmRleFBhdGg6aW5kZXhQYXRoKQoKICAgIGxldCBjaGF0Q2VsbDogQ2hhdFRhYmxlQ2VsbCA9IGNlbGwgYXMhIENoYXRUYWJsZUNlbGwKICAgIGxldCB0aW1lc3RhbXAgPSBEYXRlVG9kYXlGb3JtYXR0ZXIoKS5zdHJpbmdGcm9tRGF0ZShOU0RhdGUuZGF0ZVdpdGhJU084NjAxU3RyaW5nKG1lc3NhZ2UudGltZXN0YW1wKSkKCiAgICBjaGF0Q2VsbC5zZXRVc2VyKG1lc3NhZ2UuYXV0aG9yID8/ICJbVW5rbm93biBhdXRob3JdIiwgbWVzc2FnZTogbWVzc2FnZS5ib2R5LCBkYXRlOiB0aW1lc3RhbXAgPz8gIltVbmtub3duIGRhdGVdIikKCiAgICByZXR1cm4gY2hhdENlbGwKICB9CgogIGZ1bmMgZ2V0U3RhdHVzQ2VsbEZvclRhYmxlVmlldyh0YWJsZVZpZXc6IFVJVGFibGVWaWV3LCBmb3JJbmRleFBhdGggaW5kZXhQYXRoOk5TSW5kZXhQYXRoLCBtZXNzYWdlOiBTdGF0dXNNZXNzYWdlKSAtPiBVSVRhYmxlVmlld0NlbGwgewogICAgbGV0IGNlbGwgPSB0YWJsZVZpZXcuZGVxdWV1ZVJldXNhYmxlQ2VsbFdpdGhJZGVudGlmaWVyKE1haW5DaGF0Vmlld0NvbnRyb2xsZXIuVFdDQ2hhdFN0YXR1c0NlbGxJZGVudGlmaWVyLCBmb3JJbmRleFBhdGg6aW5kZXhQYXRoKQoKICAgIGxldCBsYWJlbCA9IGNlbGwudmlld1dpdGhUYWcoTWFpbkNoYXRWaWV3Q29udHJvbGxlci5UV0NMYWJlbFRhZykgYXMhIFVJTGFiZWwKICAgIGxldCBtZW1iZXJTdGF0dXMgPSAobWVzc2FnZS5zdGF0dXMhID09IC5Kb2luZWQpID8gImpvaW5lZCIgOiAibGVmdCIKICAgIGxhYmVsLnRleHQgPSAiVXNlciBcKG1lc3NhZ2UubWVtYmVyLmlkZW50aXR5KCkpIGhhcyBcKG1lbWJlclN0YXR1cykiCiAgICByZXR1cm4gY2VsbAogIH0KCiAgZnVuYyBqb2luQ2hhbm5lbCgpIHsKICAgIGlmIGNoYW5uZWwuc3RhdHVzID09IC5Kb2luZWQgewogICAgICBsb2FkTWVzc2FnZXMoKQogICAgICByZXR1cm4KICAgIH0KCiAgICBVSUFwcGxpY2F0aW9uLnNoYXJlZEFwcGxpY2F0aW9uKCkubmV0d29ya0FjdGl2aXR5SW5kaWNhdG9yVmlzaWJsZSA9IHRydWUKICAgIHRleHRJbnB1dGJhckhpZGRlbiA9IHRydWUKCiAgICBjaGFubmVsLmpvaW5XaXRoQ29tcGxldGlvbiB7IHJlc3VsdCBpbgogICAgICBkaXNwYXRjaF9hc3luYyhkaXNwYXRjaF9nZXRfbWFpbl9xdWV1ZSgpLCB7CiAgICAgICAgVUlBcHBsaWNhdGlvbi5zaGFyZWRBcHBsaWNhdGlvbigpLm5ldHdvcmtBY3Rpdml0eUluZGljYXRvclZpc2libGUgPSBmYWxzZQogICAgICAgIHNlbGYuc2V0VGV4dElucHV0YmFySGlkZGVuKGZhbHNlLCBhbmltYXRlZDogdHJ1ZSkKICAgICAgfSkKICAgIH0KICB9CgogIG92ZXJyaWRlIGZ1bmMgZGlkUHJlc3NSaWdodEJ1dHRvbihzZW5kZXI6IEFueU9iamVjdCEpIHsKICAgIHRleHRWaWV3LnJlZnJlc2hGaXJzdFJlc3BvbmRlcigpCiAgICBzZW5kTWVzc2FnZSh0ZXh0Vmlldy50ZXh0KQogICAgc3VwZXIuZGlkUHJlc3NSaWdodEJ1dHRvbihzZW5kZXIpCiAgfQoKICAvLyBNQVJLOiAtIENoYXQgU2VydmljZQoKICBmdW5jIHNlbmRNZXNzYWdlKGlucHV0TWVzc2FnZTogU3RyaW5nKSB7CiAgICBsZXQgbWVzc2FnZSA9IGNoYW5uZWwubWVzc2FnZXMuY3JlYXRlTWVzc2FnZVdpdGhCb2R5KGlucHV0TWVzc2FnZSkKICAgIGNoYW5uZWwubWVzc2FnZXMuc2VuZE1lc3NhZ2UobWVzc2FnZSwgY29tcGxldGlvbjogbmlsKQogIH0KCiAgZnVuYyBhZGRNZXNzYWdlcyhuZXdNZXNzYWdlczpbVFdNTWVzc2FnZV0pIHsKICAgIG1lc3NhZ2VzID0gIG1lc3NhZ2VzLnVuaW9uKG5ld01lc3NhZ2VzKQogICAgc29ydE1lc3NhZ2VzKCkKICAgIGRpc3BhdGNoX2FzeW5jKGRpc3BhdGNoX2dldF9tYWluX3F1ZXVlKCksIHsKICAgICAgc2VsZi50YWJsZVZpZXcucmVsb2FkRGF0YSgpCiAgICAgIGlmIHNlbGYubWVzc2FnZXMuY291bnQgPiAwIHsKICAgICAgICBzZWxmLnNjcm9sbFRvQm90dG9tKCkKICAgICAgfQogICAgfSkKICB9CgogIGZ1bmMgc29ydE1lc3NhZ2VzKCkgewogICAgc29ydGVkTWVzc2FnZXMgPSBtZXNzYWdlcy5zb3J0IHsgYSwgYiBpbiBhLnRpbWVzdGFtcCA+IGIudGltZXN0YW1wIH0KICB9CgogIGZ1bmMgbG9hZE1lc3NhZ2VzKCkgewogICAgbWVzc2FnZXMucmVtb3ZlQWxsKCkKICAgIGFkZE1lc3NhZ2VzKGNoYW5uZWwubWVzc2FnZXMuYWxsT2JqZWN0cygpKQogIH0KCiAgZnVuYyBzY3JvbGxUb0JvdHRvbSgpIHsKICAgIGlmIG1lc3NhZ2VzLmNvdW50ID4gMCB7CiAgICAgIGxldCBpbmRleFBhdGggPSBOU0luZGV4UGF0aChmb3JSb3c6IDAsIGluU2VjdGlvbjogMCkKICAgICAgdGFibGVWaWV3LnNjcm9sbFRvUm93QXRJbmRleFBhdGgoaW5kZXhQYXRoLCBhdFNjcm9sbFBvc2l0aW9uOiAuQm90dG9tLCBhbmltYXRlZDogdHJ1ZSkKICAgIH0KICB9CgogIGZ1bmMgbGVhdmVDaGFubmVsKCkgewogICAgY2hhbm5lbC5sZWF2ZVdpdGhDb21wbGV0aW9uIHsgcmVzdWx0IGluCiAgICAgIGlmIHJlc3VsdCA9PSAuU3VjY2VzcyB7CiAgICAgICAgbGV0IG1lbnVWaWV3Q29udHJvbGxlciA9IHNlbGYucmV2ZWFsVmlld0NvbnRyb2xsZXIoKS5yZWFyVmlld0NvbnRyb2xsZXIgYXMhIE1lbnVWaWV3Q29udHJvbGxlcgogICAgICAgIG1lbnVWaWV3Q29udHJvbGxlci5kZXNlbGVjdFNlbGVjdGVkQ2hhbm5lbCgpCiAgICAgICAgc2VsZi5yZXZlYWxWaWV3Q29udHJvbGxlcigpLnJlYXJWaWV3Q29udHJvbGxlci5wZXJmb3JtU2VndWVXaXRoSWRlbnRpZmllcihNYWluQ2hhdFZpZXdDb250cm9sbGVyLlRXQ09wZW5HZW5lcmFsQ2hhbm5lbFNlZ3VlLCBzZW5kZXI6IG5pbCkKICAgICAgfQogICAgfQogIH0KCiAgLy8gTUFSSzogLSBBY3Rpb25zCgogIEBJQkFjdGlvbiBmdW5jIGFjdGlvbkJ1dHRvblRvdWNoZWQoc2VuZGVyOiBVSUJhckJ1dHRvbkl0ZW0pIHsKICAgIGxlYXZlQ2hhbm5lbCgpCiAgfQoKICBASUJBY3Rpb24gZnVuYyByZXZlYWxCdXR0b25Ub3VjaGVkKHNlbmRlcjogQW55T2JqZWN0KSB7CiAgICByZXZlYWxWaWV3Q29udHJvbGxlcigpLnJldmVhbFRvZ2dsZUFuaW1hdGVkKHRydWUpCiAgfQp9CgpleHRlbnNpb24gTWFpbkNoYXRWaWV3Q29udHJvbGxlciA6IFRXTUNoYW5uZWxEZWxlZ2F0ZSB7CiAgZnVuYyBpcE1lc3NhZ2luZ0NsaWVudChjbGllbnQ6IFR3aWxpb0lQTWVzc2FnaW5nQ2xpZW50ISwgY2hhbm5lbDogVFdNQ2hhbm5lbCEsIG1lc3NhZ2VBZGRlZCBtZXNzYWdlOiBUV01NZXNzYWdlISkgewogICAgaWYgIW1lc3NhZ2VzLmNvbnRhaW5zKG1lc3NhZ2UpIHsKICAgICAgYWRkTWVzc2FnZXMoW21lc3NhZ2VdKQogICAgfQogIH0KCiAgZnVuYyBpcE1lc3NhZ2luZ0NsaWVudChjbGllbnQ6IFR3aWxpb0lQTWVzc2FnaW5nQ2xpZW50ISwgY2hhbm5lbDogVFdNQ2hhbm5lbCEsIG1lbWJlckpvaW5lZCBtZW1iZXI6IFRXTU1lbWJlciEpIHsKICAgIGFkZE1lc3NhZ2VzKFtTdGF0dXNNZXNzYWdlKG1lbWJlcjptZW1iZXIsIHN0YXR1czouSm9pbmVkKV0pCiAgfQoKICBmdW5jIGlwTWVzc2FnaW5nQ2xpZW50KGNsaWVudDogVHdpbGlvSVBNZXNzYWdpbmdDbGllbnQhLCBjaGFubmVsOiBUV01DaGFubmVsISwgbWVtYmVyTGVmdCBtZW1iZXI6IFRXTU1lbWJlciEpIHsKICAgIGFkZE1lc3NhZ2VzKFtTdGF0dXNNZXNzYWdlKG1lbWJlcjptZW1iZXIsIHN0YXR1czouTGVmdCldKQogIH0KCiAgZnVuYyBpcE1lc3NhZ2luZ0NsaWVudChjbGllbnQ6IFR3aWxpb0lQTWVzc2FnaW5nQ2xpZW50ISwgY2hhbm5lbEhpc3RvcnlMb2FkZWQgY2hhbm5lbDogVFdNQ2hhbm5lbCEpIHsKICAgIGxvYWRNZXNzYWdlcygpCiAgICB0YWJsZVZpZXcucmVsb2FkRGF0YSgpCiAgfQoKICBmdW5jIGlwTWVzc2FnaW5nQ2xpZW50KGNsaWVudDogVHdpbGlvSVBNZXNzYWdpbmdDbGllbnQhLCBjaGFubmVsRGVsZXRlZCBjaGFubmVsOiBUV01DaGFubmVsISkgewogICAgZGlzcGF0Y2hfYXN5bmMoZGlzcGF0Y2hfZ2V0X21haW5fcXVldWUoKSwgewogICAgICBpZiBjaGFubmVsID09IHNlbGYuY2hhbm5lbCB7CiAgICAgICAgc2VsZi5yZXZlYWxWaWV3Q29udHJvbGxlcigpLnJlYXJWaWV3Q29udHJvbGxlcgogICAgICAgICAgLnBlcmZvcm1TZWd1ZVdpdGhJZGVudGlmaWVyKE1haW5DaGF0Vmlld0NvbnRyb2xsZXIuVFdDT3BlbkdlbmVyYWxDaGFubmVsU2VndWUsIHNlbmRlcjogbmlsKQogICAgICB9CiAgICB9KQogIH0KfQo=</textarea>
<textarea class="saurus-file" data-file="twiliochat/MenuViewController.swift" data-mode="text">aW1wb3J0IFVJS2l0CmltcG9ydCBQYXJzZQoKY2xhc3MgTWVudVZpZXdDb250cm9sbGVyOiBVSVZpZXdDb250cm9sbGVyIHsKICBzdGF0aWMgbGV0IFRXQ09wZW5DaGFubmVsU2VndWUgPSAiT3BlbkNoYXQiCiAgc3RhdGljIGxldCBUV0NSZWZyZXNoQ29udHJvbFhPZmZzZXQ6IENHRmxvYXQgPSAxMjAKCiAgQElCT3V0bGV0IHdlYWsgdmFyIHRhYmxlVmlldzogVUlUYWJsZVZpZXchCiAgQElCT3V0bGV0IHdlYWsgdmFyIHVzZXJuYW1lTGFiZWw6IFVJTGFiZWwhCgogIHZhciByZWZyZXNoQ29udHJvbDogVUlSZWZyZXNoQ29udHJvbCEKCiAgb3ZlcnJpZGUgZnVuYyB2aWV3RGlkTG9hZCgpIHsKICAgIHN1cGVyLnZpZXdEaWRMb2FkKCkKCiAgICBsZXQgYmdJbWFnZSA9IFVJSW1hZ2VWaWV3KGltYWdlOiBVSUltYWdlKG5hbWVkOiJob21lLWJnIikpCiAgICBiZ0ltYWdlLmZyYW1lID0gc2VsZi50YWJsZVZpZXcuZnJhbWUKICAgIHRhYmxlVmlldy5iYWNrZ3JvdW5kVmlldyA9IGJnSW1hZ2UKCiAgICB1c2VybmFtZUxhYmVsLnRleHQgPSBJUE1lc3NhZ2luZ01hbmFnZXIuc2hhcmVkTWFuYWdlcigpLnVzZXJJZGVudGl0eQoKICAgIHJlZnJlc2hDb250cm9sID0gVUlSZWZyZXNoQ29udHJvbCgpCiAgICB0YWJsZVZpZXcuYWRkU3VidmlldyhyZWZyZXNoQ29udHJvbCkKICAgIHJlZnJlc2hDb250cm9sLmFkZFRhcmdldChzZWxmLCBhY3Rpb246ICJyZWZyZXNoQ2hhbm5lbHMiLCBmb3JDb250cm9sRXZlbnRzOiAuVmFsdWVDaGFuZ2VkKQogICAgcmVmcmVzaENvbnRyb2wudGludENvbG9yID0gVUlDb2xvci53aGl0ZUNvbG9yKCkKCiAgICBzZWxmLnJlZnJlc2hDb250cm9sLmZyYW1lLm9yaWdpbi54IC09IE1lbnVWaWV3Q29udHJvbGxlci5UV0NSZWZyZXNoQ29udHJvbFhPZmZzZXQKICAgIENoYW5uZWxNYW5hZ2VyLnNoYXJlZE1hbmFnZXIuZGVsZWdhdGUgPSBzZWxmCiAgICBzZWxmLnBvcHVsYXRlQ2hhbm5lbHMoKQogIH0KCiAgLy8gTUFSSzogLSBJbnRlcm5hbCBtZXRob2RzCgogIGZ1bmMgbG9hZGluZ0NlbGxGb3JUYWJsZVZpZXcodGFibGVWaWV3OiBVSVRhYmxlVmlldykgLT4gVUlUYWJsZVZpZXdDZWxsIHsKICAgIHJldHVybiB0YWJsZVZpZXcuZGVxdWV1ZVJldXNhYmxlQ2VsbFdpdGhJZGVudGlmaWVyKCJsb2FkaW5nQ2VsbCIpIQogIH0KCiAgZnVuYyBjaGFubmVsQ2VsbEZvclRhYmxlVmlldyh0YWJsZVZpZXc6IFVJVGFibGVWaWV3LCBhdEluZGV4UGF0aCBpbmRleFBhdGg6IE5TSW5kZXhQYXRoKSAtPiBVSVRhYmxlVmlld0NlbGwgewogICAgbGV0IG1lbnVDZWxsID0gdGFibGVWaWV3LmRlcXVldWVSZXVzYWJsZUNlbGxXaXRoSWRlbnRpZmllcigiY2hhbm5lbENlbGwiLCBmb3JJbmRleFBhdGg6IGluZGV4UGF0aCkgYXMhIE1lbnVUYWJsZUNlbGwKCiAgICBsZXQgY2hhbm5lbCA9IENoYW5uZWxNYW5hZ2VyLnNoYXJlZE1hbmFnZXIuY2hhbm5lbHMhW2luZGV4UGF0aC5yb3ddCiAgICB2YXIgZnJpZW5kbHlOYW1lID0gY2hhbm5lbC5mcmllbmRseU5hbWUKICAgIGlmIGxldCBuYW1lID0gY2hhbm5lbC5mcmllbmRseU5hbWUgd2hlcmUgbmFtZS5pc0VtcHR5IHsKICAgICAgZnJpZW5kbHlOYW1lID0gbmFtZQogICAgfQogICAgbWVudUNlbGwuY2hhbm5lbE5hbWUgPSBmcmllbmRseU5hbWUKICAgIHJldHVybiBtZW51Q2VsbAogIH0KCiAgZnVuYyBwb3B1bGF0ZUNoYW5uZWxzKCkgewogICAgQ2hhbm5lbE1hbmFnZXIuc2hhcmVkTWFuYWdlci5wb3B1bGF0ZUNoYW5uZWxzV2l0aENvbXBsZXRpb24geyBzdWNjZXNzIGluCiAgICAgIGlmICFzdWNjZXNzIHsKICAgICAgICBBbGVydERpYWxvZ0NvbnRyb2xsZXIuc2hvd0FsZXJ0V2l0aE1lc3NhZ2UoIkZhaWxlZCB0byBsb2FkIGNoYW5uZWxzIiwKICAgICAgICAgIHRpdGxlOiAiSVAgTWVzc2FnaW5nIERlbW8iLAogICAgICAgICAgcHJlc2VudGVyOiBzZWxmKQogICAgICB9CiAgICAgIHNlbGYudGFibGVWaWV3LnJlbG9hZERhdGEoKQogICAgICBzZWxmLnJlZnJlc2hDb250cm9sLmVuZFJlZnJlc2hpbmcoKQogICAgfQogIH0KCiAgZnVuYyByZWZyZXNoQ2hhbm5lbHMoKSB7CiAgICByZWZyZXNoQ29udHJvbC5iZWdpblJlZnJlc2hpbmcoKQogICAgcG9wdWxhdGVDaGFubmVscygpCiAgfQoKICBmdW5jIGRlc2VsZWN0U2VsZWN0ZWRDaGFubmVsKCkgewogICAgbGV0IHNlbGVjdGVkUm93ID0gdGFibGVWaWV3LmluZGV4UGF0aEZvclNlbGVjdGVkUm93CiAgICBpZiBsZXQgcm93ID0gc2VsZWN0ZWRSb3cgewogICAgICB0YWJsZVZpZXcuZGVzZWxlY3RSb3dBdEluZGV4UGF0aChyb3csIGFuaW1hdGVkOiB0cnVlKQogICAgfQogIH0KCiAgLy8gTUFSSzogLSBDaGFubmVsCgogIGZ1bmMgY3JlYXRlTmV3Q2hhbm5lbERpYWxvZygpIHsKICAgIElucHV0RGlhbG9nQ29udHJvbGxlci5zaG93V2l0aFRpdGxlKCJOZXcgQ2hhbm5lbCIsCiAgICAgIG1lc3NhZ2U6ICJFbnRlciBhIG5hbWUgZm9yIHRoaXMgY2hhbm5lbCIsCiAgICAgIHBsYWNlaG9sZGVyOiAiTmFtZSIsCiAgICAgIHByZXNlbnRlcjogc2VsZikgeyB0ZXh0IGluCiAgICAgICAgQ2hhbm5lbE1hbmFnZXIuc2hhcmVkTWFuYWdlci5jcmVhdGVDaGFubmVsV2l0aE5hbWUodGV4dCwgY29tcGxldGlvbjogeyBfLF8gaW4gfSkKICAgIH0KICB9CgogIC8vIE1BUks6IExvZ291dAoKICBmdW5jIHByb21wdExvZ291dCgpIHsKICAgIGxldCBhbGVydCA9IFVJQWxlcnRDb250cm9sbGVyKHRpdGxlOiBuaWwsIG1lc3NhZ2U6ICJZb3UgYXJlIGFib3V0IHRvIExvZ291dCIsIHByZWZlcnJlZFN0eWxlOiAuQWxlcnQpCgogICAgbGV0IGNhbmNlbEFjdGlvbiA9IFVJQWxlcnRBY3Rpb24odGl0bGU6ICJDYW5jZWwiLCBzdHlsZTogLkNhbmNlbCwgaGFuZGxlcjogbmlsKQogICAgbGV0IGNvbmZpcm1BY3Rpb24gPSBVSUFsZXJ0QWN0aW9uKHRpdGxlOiAiQ29uZmlybSIsIHN0eWxlOiAuRGVmYXVsdCkgeyBhY3Rpb24gaW4KICAgICAgc2VsZi5sb2dPdXQoKQogICAgfQoKICAgIGFsZXJ0LmFkZEFjdGlvbihjYW5jZWxBY3Rpb24pCiAgICBhbGVydC5hZGRBY3Rpb24oY29uZmlybUFjdGlvbikKICAgIHByZXNlbnRWaWV3Q29udHJvbGxlcihhbGVydCwgYW5pbWF0ZWQ6IHRydWUsIGNvbXBsZXRpb246IG5pbCkKICB9CgogIGZ1bmMgbG9nT3V0KCkgewogICAgSVBNZXNzYWdpbmdNYW5hZ2VyLnNoYXJlZE1hbmFnZXIoKS5sb2dvdXQoKQogICAgSVBNZXNzYWdpbmdNYW5hZ2VyLnNoYXJlZE1hbmFnZXIoKS5wcmVzZW50Um9vdFZpZXdDb250cm9sbGVyKCkKICB9CgogIC8vIE1BUks6IC0gQWN0aW9ucwoKICBASUJBY3Rpb24gZnVuYyBsb2dvdXRCdXR0b25Ub3VjaGVkKHNlbmRlcjogVUlCdXR0b24pIHsKICAgIHByb21wdExvZ291dCgpCiAgfQoKICBASUJBY3Rpb24gZnVuYyBuZXdDaGFubmVsQnV0dG9uVG91Y2hlZChzZW5kZXI6IFVJQnV0dG9uKSB7CiAgICBjcmVhdGVOZXdDaGFubmVsRGlhbG9nKCkKICB9CgogIC8vIE1BUks6IC0gTmF2aWdhdGlvbgoKICBvdmVycmlkZSBmdW5jIHByZXBhcmVGb3JTZWd1ZShzZWd1ZTogVUlTdG9yeWJvYXJkU2VndWUsIHNlbmRlcjogQW55T2JqZWN0PykgewogICAgaWYgc2VndWUuaWRlbnRpZmllciA9PSBNZW51Vmlld0NvbnRyb2xsZXIuVFdDT3BlbkNoYW5uZWxTZWd1ZSB7CiAgICAgIGxldCBpbmRleFBhdGggPSBzZW5kZXIgYXMhIE5TSW5kZXhQYXRoCiAgICAgIGxldCBjaGFubmVsID0gQ2hhbm5lbE1hbmFnZXIuc2hhcmVkTWFuYWdlci5jaGFubmVscyFbaW5kZXhQYXRoLnJvd10gYXMhIFRXTUNoYW5uZWwKICAgICAgbGV0IG5hdmlnYXRpb25Db250cm9sbGVyID0gc2VndWUuZGVzdGluYXRpb25WaWV3Q29udHJvbGxlciBhcyEgVUlOYXZpZ2F0aW9uQ29udHJvbGxlcgogICAgICAobmF2aWdhdGlvbkNvbnRyb2xsZXIudmlzaWJsZVZpZXdDb250cm9sbGVyIGFzISBNYWluQ2hhdFZpZXdDb250cm9sbGVyKS5jaGFubmVsID0gY2hhbm5lbAogICAgfQogIH0KCiAgLy8gTUFSSzogLSBTdHlsZQoKICBvdmVycmlkZSBmdW5jIHByZWZlcnJlZFN0YXR1c0JhclN0eWxlKCkgLT4gVUlTdGF0dXNCYXJTdHlsZSB7CiAgICByZXR1cm4gLkxpZ2h0Q29udGVudAogIH0KfQoKLy8gTUFSSzogLSBVSVRhYmxlVmlld0RhdGFTb3VyY2UKZXh0ZW5zaW9uIE1lbnVWaWV3Q29udHJvbGxlciA6IFVJVGFibGVWaWV3RGF0YVNvdXJjZSB7CiAgZnVuYyB0YWJsZVZpZXcodGFibGVWaWV3OiBVSVRhYmxlVmlldywgbnVtYmVyT2ZSb3dzSW5TZWN0aW9uIHNlY3Rpb246IEludCkgLT4gSW50IHsKICAgIGlmIGxldCBjaGFubmVscyA9IENoYW5uZWxNYW5hZ2VyLnNoYXJlZE1hbmFnZXIuY2hhbm5lbHMgewogICAgICByZXR1cm4gY2hhbm5lbHMuY291bnQKICAgIH0KICAgIHJldHVybiAxCiAgfQoKICBmdW5jIHRhYmxlVmlldyh0YWJsZVZpZXc6IFVJVGFibGVWaWV3LCBjZWxsRm9yUm93QXRJbmRleFBhdGggaW5kZXhQYXRoOiBOU0luZGV4UGF0aCkgLT4gVUlUYWJsZVZpZXdDZWxsIHsKICAgIGxldCBjZWxsOiBVSVRhYmxlVmlld0NlbGwKCiAgICBpZiBDaGFubmVsTWFuYWdlci5zaGFyZWRNYW5hZ2VyLmNoYW5uZWxzID09IG5pbCB7CiAgICAgIGNlbGwgPSBsb2FkaW5nQ2VsbEZvclRhYmxlVmlldyh0YWJsZVZpZXcpCiAgICB9CiAgICBlbHNlIHsKICAgICAgY2VsbCA9IGNoYW5uZWxDZWxsRm9yVGFibGVWaWV3KHRhYmxlVmlldywgYXRJbmRleFBhdGg6IGluZGV4UGF0aCkKICAgIH0KCiAgICBjZWxsLmxheW91dElmTmVlZGVkKCkKICAgIHJldHVybiBjZWxsCiAgfQoKICBmdW5jIHRhYmxlVmlldyh0YWJsZVZpZXc6IFVJVGFibGVWaWV3LCBjYW5FZGl0Um93QXRJbmRleFBhdGggaW5kZXhQYXRoOiBOU0luZGV4UGF0aCkgLT4gQm9vbCB7CiAgICBpZiBsZXQgY2hhbm5lbCA9IENoYW5uZWxNYW5hZ2VyLnNoYXJlZE1hbmFnZXIuY2hhbm5lbHM/Lm9iamVjdEF0SW5kZXgoaW5kZXhQYXRoLnJvdykgYXM/IFRXTUNoYW5uZWwgewogICAgICByZXR1cm4gY2hhbm5lbCAhPSBDaGFubmVsTWFuYWdlci5zaGFyZWRNYW5hZ2VyLmdlbmVyYWxDaGFubmVsCiAgICB9CiAgICByZXR1cm4gZmFsc2UKICB9CgogIGZ1bmMgdGFibGVWaWV3KHRhYmxlVmlldzogVUlUYWJsZVZpZXcsIGNvbW1pdEVkaXRpbmdTdHlsZSBlZGl0aW5nU3R5bGU6IFVJVGFibGVWaWV3Q2VsbEVkaXRpbmdTdHlsZSwKICAgIGZvclJvd0F0SW5kZXhQYXRoIGluZGV4UGF0aDogTlNJbmRleFBhdGgpIHsKICAgICAgaWYgZWRpdGluZ1N0eWxlICE9IC5EZWxldGUgewogICAgICAgIHJldHVybgogICAgICB9CiAgICAgIGlmIGxldCBjaGFubmVsID0gQ2hhbm5lbE1hbmFnZXIuc2hhcmVkTWFuYWdlci5jaGFubmVscz8ub2JqZWN0QXRJbmRleChpbmRleFBhdGgucm93KSB7CiAgICAgICAgY2hhbm5lbC5kZXN0cm95V2l0aENvbXBsZXRpb24geyByZXN1bHQgaW4KICAgICAgICAgIGlmIHJlc3VsdCA9PSAuU3VjY2VzcyB7CiAgICAgICAgICAgIHRhYmxlVmlldy5yZWxvYWREYXRhKCkKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgewogICAgICAgICAgICBBbGVydERpYWxvZ0NvbnRyb2xsZXIuc2hvd0FsZXJ0V2l0aE1lc3NhZ2UoIllvdSBjYW4gbm90IGRlbGV0ZSB0aGlzIGNoYW5uZWwiLCB0aXRsZTogbmlsLCBwcmVzZW50ZXI6IHNlbGYpCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgfQp9CgovLyBNQVJLOiAtIFVJVGFibGVWaWV3RGVsZWdhdGUKZXh0ZW5zaW9uIE1lbnVWaWV3Q29udHJvbGxlciA6IFVJVGFibGVWaWV3RGVsZWdhdGUgewogIGZ1bmMgdGFibGVWaWV3KHRhYmxlVmlldzogVUlUYWJsZVZpZXcsIGRpZFNlbGVjdFJvd0F0SW5kZXhQYXRoIGluZGV4UGF0aDogTlNJbmRleFBhdGgpIHsKICAgIHBlcmZvcm1TZWd1ZVdpdGhJZGVudGlmaWVyKE1lbnVWaWV3Q29udHJvbGxlci5UV0NPcGVuQ2hhbm5lbFNlZ3VlLCBzZW5kZXI6IGluZGV4UGF0aCkKICB9Cn0KCi8vIE1BUks6IC0gVHdpbGlvSVBNZXNzYWdpbmdDbGllbnREZWxlZ2F0ZQpleHRlbnNpb24gTWVudVZpZXdDb250cm9sbGVyIDogVHdpbGlvSVBNZXNzYWdpbmdDbGllbnREZWxlZ2F0ZSB7CiAgZnVuYyBpcE1lc3NhZ2luZ0NsaWVudChjbGllbnQ6IFR3aWxpb0lQTWVzc2FnaW5nQ2xpZW50ISwgY2hhbm5lbEFkZGVkIGNoYW5uZWw6IFRXTUNoYW5uZWwhKSB7CiAgICB0YWJsZVZpZXcucmVsb2FkRGF0YSgpCiAgfQoKICBmdW5jIGlwTWVzc2FnaW5nQ2xpZW50KGNsaWVudDogVHdpbGlvSVBNZXNzYWdpbmdDbGllbnQhLCBjaGFubmVsQ2hhbmdlZCBjaGFubmVsOiBUV01DaGFubmVsISkgewogICAgdGFibGVWaWV3LnJlbG9hZERhdGEoKQogIH0KCiAgZnVuYyBpcE1lc3NhZ2luZ0NsaWVudChjbGllbnQ6IFR3aWxpb0lQTWVzc2FnaW5nQ2xpZW50ISwgY2hhbm5lbERlbGV0ZWQgY2hhbm5lbDogVFdNQ2hhbm5lbCEpIHsKICAgIHRhYmxlVmlldy5yZWxvYWREYXRhKCkKICB9Cn0K</textarea>
</div>
</div><div class="saurus-overview"><ul></ul></div></div><div class="saurus-code"><div class="file-path"><span class="crumb-container"></span><i class="fa fa-fw fa-folder"></i></div><div class="saurus-editor"></div></div><div class="saurus-explorer"><div class="saurus-file-list"></div><a href="https://github.com/TwilioDevEd/twiliochat-swift" target="_blank" class="explorer-get-code"> <i class="fa fa-lg fa-github-square"> </i>View Code on GitHub</a></div></div></div></div><script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min.js"></script><script src="ace/ace.js"></script><script src="ace/theme-monokai.js"></script><script src="viewsaurus.js"></script></body></html>