<!DOCTYPE html><html><head><title>Twilio Chat</title><style>body, html {
  height:100%;
  width:100%;
  padding:0;
  margin:0;
  overflow:hidden;
  background-color:#ddd;
}
.wrapper {
  height:100%;
  width:100%;
}</style><link rel="shortcut icon" href="//twilio.com/bundles/marketing/img/favicons/favicon.ico"><link rel="apple-touch-icon" href="//twilio.com/bundles/marketing/img/favicons/favicon_57.png"><link rel="apple-touch-icon" sizes="72x72" href="//twilio.com/bundles/marketing/img/favicons/favicon_72.png"><link rel="apple-touch-icon" sizes="114x114" href="//twilio.com/bundles/marketing/img/favicons/favicon_114.png"><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css"><link rel="stylesheet" href="viewsaurus.css"></head><body><div class="wrapper"><div id="viewsaurus" data-title="Twilio Chat"><div class="saurus-panes"><div class="saurus-prose"><div class="saurus-prose-header"><div class="title-outer"><span class="step-title">Twilio Chat</span></div></div><div class="saurus-nav-buttons"><div class="saurus-nav-button nav-overview"><div class="saurus-nav-button-inner"><i class="fa fa-fw fa-list"></i></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-previous"><div class="saurus-nav-button-inner"><a href=""> <i class="fa fa-fw fa-play fa-rotate-180"></i></a></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-next clickable"><div class="saurus-nav-button-inner"><a href="#1"> <i class="fa fa-fw fa-play"></i></a></div></div><div class="saurus-next-title"><span class="next-title-inner"></span></div></div><div class="saurus-progress-bar"></div><div class="saurus-start"><p>Learn to implement a simple chat application using Twilio IP Messaging Client</p><a href="#0">Start Tutorial</a></div><div class="saurus-content"><div data-title="Twilio Chat Swift" class="chapter"><div data-title="Introduction" data-file="twiliochat/AppDelegate.swift" data-mode="swift" class="step"><h2 id="introduction">Introduction</h2>
<p>Ready to implement a chat application using Twilio IP Messaging Client?
Here is how it works at a high level:</p>
<ol>
<li><p><a href="//www.twilio.com/ip-messaging">Twilio IP Messaging</a> is the core product
we&#39;ll be using to handle all the chat functionality.</p>
</li>
<li><p>We use a server side app to generate <a href="//www.twilio.com/docs/api/ip-messaging/guides/identity">user access
tokens</a> which contains
all your Twilio account information. The IP Messaging Client uses this token
to connect with the API</p>
</li>
<li><p><a href="//media.twiliocdn.com/sdk/ios/common/releases/0.2.0/docs/">Twilio Common</a>
is the part of the SDK than handles access tokens and even refreshes them upon token
expiration.</p>
</li>
</ol>
<hr>
<p><strong>See Also:</strong></p>
<ul>
<li><a href="//www.twilio.com/docs/api/ip-messaging">IP Messaging API</a></li>
<li><a href="//www.twilio.com/docs/api/ip-messaging/guides/quickstart-ios">iOS QuickStart</a></li>
<li><a href="//www.twilio.com/docs/api/ip-messaging/guides/channels">Channels and Messages</a></li>
<li><a href="//www.twilio.com/docs/api/ip-messaging/guides/channels">User Identity &amp; Access Tokens</a></li>
<li><a href="//media.twiliocdn.com/sdk/rtc/ios/ip-messaging/releases/0.13.5.b191-9dfea4a/docs/">Twilio IP Messaging Client Reference</a></li>
<li><a href="//media.twiliocdn.com/sdk/ios/common/releases/0.2.0/docs/">Twilio Common Reference</a></li>
</ul>
</div><div data-title="Initializing the Client" data-file="twiliochat/IPMessagingManager.swift" data-highlight="75-95,110-118" data-mode="swift" class="step"><h2 id="initializing-the-ip-messaging-client">Initializing the IP Messaging Client</h2>
<p>The only thing you need to create a client is an access token. This token
holds information about your Twilio account and IP Messaging API keys. We have created a web
version of Twilio chat in different languages. You can use any of these to generate the token:</p>
<ul>
<li><a href="//github.com/TwilioDevEd/twiliochat-laravel">PHP - Laravel</a></li>
<li><a href="//github.com/TwilioDevEd/twiliochat-csharp">C# - .NET MVC</a></li>
<li><a href="//github.com/TwilioDevEd/twiliochat-servlets">Java - Servlets</a></li>
<li><a href="//github.com/TwilioDevEd/twiliochat-node">JS - Node</a></li>
</ul>
<p>We use <a href="//github.com/Alamofire/Alamofire">Alamofire</a>
to make a request to our server and get the access token.</p>
<hr>
<p><strong>See Also:</strong></p>
<ul>
<li><a href="//github.com/Alamofire/Alamofire">Alamofire HTTP Requests</a></li>
</ul>
</div><div data-title="Getting the Channel List" data-file="twiliochat/ChannelManager.swift" data-highlight="71-112" data-mode="swift" class="step"><h2 id="getting-the-channel-list">Getting the Channel List</h2>
<p>Our <code>ChannelManager</code> class takes care of everything related to channels.
The first thing we need to do when the class is initialized, is to store
a list of channels of type <code>TWMChannelList</code> that we get by calling the method <code>channelsListWithCompletion</code>
from the IP Messaging Client.</p>
<p>Once we have a <code>TWMChannelList</code> object, we can fetch the actual channels using the
<code>channelsList&#39;s</code> method <code>loadChannelsWithCompletion</code>. When the operation
finishes successfully, in order to get an array of channels, call the
method <code>allObjects</code> on the same object.</p>
</div><div data-title="Listen to Client Events" data-file="twiliochat/ChannelManager.swift" data-highlight="146-174" data-mode="swift" class="step"><h2 id="listen-to-client-events">Listen to Client Events</h2>
<p>The IP Messaging Client will trigger events such as <code>channelAdded</code> or <code>channelDeleted</code>
on our application. Given the creation or deletion of a channel, we&#39;ll reload the
channel list in the reveal controller. If a channel is deleted and we were currently joined to that
channel, the application will automatically join the general channel.</p>
<p><code>ChannelManager</code> is our <code>TwilioIPMessagingClientDelegate</code>. In this class we
implement the delegate methods, but we also allow <code>MainChatViewController</code>
class to be a delegate of ChannelManager, so it can listen to client events too.</p>
<hr>
<p><strong>See Also:</strong></p>
<ul>
<li><a href="//media.twiliocdn.com/sdk/rtc/ios/ip-messaging/releases/0.13.5.b191-9dfea4a/docs/Protocols/TwilioIPMessagingClientDelegate.html">TwilioIPMessagingClientDelegate Protocol Reference</a></li>
</ul>
</div><div data-title="Join the General Channel" data-file="twiliochat/ChannelManager.swift" data-highlight="20-67" data-mode="swift" class="step"><h2 id="join-the-general-channel">Join the General Channel</h2>
<p>This application will try to join a channel called &quot;General Channel&quot; when it starts.
If the channel doesn&#39;t exist, it&#39;ll create one with that name. The scope of
this example application will show you how to work only with public channels,
but the IP Messaging client allows you to create private channels and handle
invitations.</p>
<p>Once you have joined a channel, you can register a class as the <code>TWMChannelDelegate</code>
so you can start listening to events such as <code>messageAdded</code> or <code>memberJoined</code>.
We&#39;ll show you how to do this in the next step.</p>
</div><div data-title="Listen to Channel Events" data-file="twiliochat/MainChatViewController.swift" data-highlight="209-237" data-mode="swift" class="step"><h2 id="listen-to-channel-events">Listen to Channel Events</h2>
<p>We registered <code>MainChatViewController</code> as the <code>TWMChannelDelegate</code>, and here
we implemented the following methods that listen to channel events:</p>
<ul>
<li><code>messageAdded</code>: When someone sends a message to the channel you are connected to.</li>
<li><code>channelDeleted</code>: When someone deletes a channel.</li>
<li><code>memberJoined</code>: When someone joins the channel.</li>
<li><code>memberLeft</code>: When someone leaves the channel.</li>
</ul>
<p>As you may have noticed, each one of these methods include useful objects
as parameters. One example is the actual message that was added to the channel.</p>
</div><div data-title="Joining Other Channels" data-file="twiliochat/MainChatViewController.swift" data-highlight="131-146" data-mode="swift" class="step"><h2 id="joining-other-channels">Joining Other Channels</h2>
<p>The application uses <a href="//github.com/John-Lluch/SWRevealViewController">SWRevealViewController</a>
to show a sidebar that contains a list of the channels created for that Twilio account.</p>
<p>When you tap on the name of a channel from the sidebar, that channel is set
on the <code>MainChatViewController</code>. The <code>joinChannel</code> method takes care of joining
to the selected channel and loading the messages.</p>
</div><div data-title="Creating a Channel" data-file="twiliochat/ChannelManager.swift" data-highlight="122-143" data-mode="swift" class="step"><h2 id="creating-a-channel">Creating a Channel</h2>
<p>We use an input dialog so the user can type the name of the new channel.
The only restriction here is that the user can&#39;t create a channel called
&quot;General Channel&quot;. Other than that, creating a channel is as simple as calling
<code>createChannelWithFriendlyName</code></p>
</div><div data-title="Deleting a Channel" data-file="twiliochat/MenuViewController.swift" data-highlight="162-177" data-mode="swift" class="step"><h2 id="deleting-a-channel">Deleting a Channel</h2>
<p>Deleting a channel is easier than creating one. We&#39;ll use the <code>UITableView</code>
hability to delete a cell. Once you have figured out what channel is meant
to be deleted (from the selected cell index path), deleting it is as simple
as calling the channel&#39;s method <code>destroyWithCompletion</code>.</p>
</div><div data-title="Where to Next?" class="step"><h2 id="where-to-next-">Where to Next?</h2>
<p>That&#39;s it! We&#39;ve just implemented a simple chat application using Swift.</p>
<p>Thanks for checking out this tutorial! If you have any feedback
to share with us, we&#39;d love to hear it.
<a href="//www.twilio.com/help/contact">Contact support</a> to let us know what you think.</p>
</div></div>
<div class="saurus-files" style="display:none;"><textarea class="saurus-file" data-file="twiliochat/AppDelegate.swift" data-mode="swift">aW1wb3J0IFVJS2l0CgpAVUlBcHBsaWNhdGlvbk1haW4KY2xhc3MgQXBwRGVsZWdhdGU6IFVJUmVzcG9uZGVyLCBVSUFwcGxpY2F0aW9uRGVsZWdhdGUgewogIHZhciB3aW5kb3c6IFVJV2luZG93PwoKICBmdW5jIGFwcGxpY2F0aW9uKGFwcGxpY2F0aW9uOiBVSUFwcGxpY2F0aW9uLCBkaWRGaW5pc2hMYXVuY2hpbmdXaXRoT3B0aW9ucyBsYXVuY2hPcHRpb25zOiBbTlNPYmplY3Q6IEFueU9iamVjdF0/KSAtPiBCb29sIHsKICAgIElQTWVzc2FnaW5nTWFuYWdlci5zaGFyZWRNYW5hZ2VyKCkucHJlc2VudExhdW5jaFNjcmVlbigpCiAgICBJUE1lc3NhZ2luZ01hbmFnZXIuc2hhcmVkTWFuYWdlcigpLnByZXNlbnRSb290Vmlld0NvbnRyb2xsZXIoKQogICAgcmV0dXJuIHRydWUKICB9CgogIGZ1bmMgYXBwbGljYXRpb25XaWxsUmVzaWduQWN0aXZlKGFwcGxpY2F0aW9uOiBVSUFwcGxpY2F0aW9uKSB7CiAgICAvLyBTZW50IHdoZW4gdGhlIGFwcGxpY2F0aW9uIGlzIGFib3V0IHRvIG1vdmUgZnJvbSBhY3RpdmUgdG8gaW5hY3RpdmUgc3RhdGUuIFRoaXMgY2FuIG9jY3VyIGZvciBjZXJ0YWluIHR5cGVzIG9mIHRlbXBvcmFyeSBpbnRlcnJ1cHRpb25zIChzdWNoIGFzIGFuIGluY29taW5nIHBob25lIGNhbGwgb3IgU01TIG1lc3NhZ2UpIG9yIHdoZW4gdGhlIHVzZXIgcXVpdHMgdGhlIGFwcGxpY2F0aW9uIGFuZCBpdCBiZWdpbnMgdGhlIHRyYW5zaXRpb24gdG8gdGhlIGJhY2tncm91bmQgc3RhdGUuCiAgICAvLyBVc2UgdGhpcyBtZXRob2QgdG8gcGF1c2Ugb25nb2luZyB0YXNrcywgZGlzYWJsZSB0aW1lcnMsIGFuZCB0aHJvdHRsZSBkb3duIE9wZW5HTCBFUyBmcmFtZSByYXRlcy4gR2FtZXMgc2hvdWxkIHVzZSB0aGlzIG1ldGhvZCB0byBwYXVzZSB0aGUgZ2FtZS4KICB9CgogIGZ1bmMgYXBwbGljYXRpb25EaWRFbnRlckJhY2tncm91bmQoYXBwbGljYXRpb246IFVJQXBwbGljYXRpb24pIHsKICAgIC8vIFVzZSB0aGlzIG1ldGhvZCB0byByZWxlYXNlIHNoYXJlZCByZXNvdXJjZXMsIHNhdmUgdXNlciBkYXRhLCBpbnZhbGlkYXRlIHRpbWVycywgYW5kIHN0b3JlIGVub3VnaCBhcHBsaWNhdGlvbiBzdGF0ZSBpbmZvcm1hdGlvbiB0byByZXN0b3JlIHlvdXIgYXBwbGljYXRpb24gdG8gaXRzIGN1cnJlbnQgc3RhdGUgaW4gY2FzZSBpdCBpcyB0ZXJtaW5hdGVkIGxhdGVyLgogICAgLy8gSWYgeW91ciBhcHBsaWNhdGlvbiBzdXBwb3J0cyBiYWNrZ3JvdW5kIGV4ZWN1dGlvbiwgdGhpcyBtZXRob2QgaXMgY2FsbGVkIGluc3RlYWQgb2YgYXBwbGljYXRpb25XaWxsVGVybWluYXRlOiB3aGVuIHRoZSB1c2VyIHF1aXRzLgogIH0KCiAgZnVuYyBhcHBsaWNhdGlvbldpbGxFbnRlckZvcmVncm91bmQoYXBwbGljYXRpb246IFVJQXBwbGljYXRpb24pIHsKICAgIC8vIENhbGxlZCBhcyBwYXJ0IG9mIHRoZSB0cmFuc2l0aW9uIGZyb20gdGhlIGJhY2tncm91bmQgdG8gdGhlIGluYWN0aXZlIHN0YXRlIGhlcmUgeW91IGNhbiB1bmRvIG1hbnkgb2YgdGhlIGNoYW5nZXMgbWFkZSBvbiBlbnRlcmluZyB0aGUgYmFja2dyb3VuZC4KICB9CgogIGZ1bmMgYXBwbGljYXRpb25EaWRCZWNvbWVBY3RpdmUoYXBwbGljYXRpb246IFVJQXBwbGljYXRpb24pIHsKICAgIC8vIFJlc3RhcnQgYW55IHRhc2tzIHRoYXQgd2VyZSBwYXVzZWQgKG9yIG5vdCB5ZXQgc3RhcnRlZCkgd2hpbGUgdGhlIGFwcGxpY2F0aW9uIHdhcyBpbmFjdGl2ZS4gSWYgdGhlIGFwcGxpY2F0aW9uIHdhcyBwcmV2aW91c2x5IGluIHRoZSBiYWNrZ3JvdW5kLCBvcHRpb25hbGx5IHJlZnJlc2ggdGhlIHVzZXIgaW50ZXJmYWNlLgogIH0KCiAgZnVuYyBhcHBsaWNhdGlvbldpbGxUZXJtaW5hdGUoYXBwbGljYXRpb246IFVJQXBwbGljYXRpb24pIHsKICAgIC8vIENhbGxlZCB3aGVuIHRoZSBhcHBsaWNhdGlvbiBpcyBhYm91dCB0byB0ZXJtaW5hdGUuIFNhdmUgZGF0YSBpZiBhcHByb3ByaWF0ZS4gU2VlIGFsc28gYXBwbGljYXRpb25EaWRFbnRlckJhY2tncm91bmQ6LgogIH0KCgp9Cgo=</textarea>
<textarea class="saurus-file" data-file="twiliochat/IPMessagingManager.swift" data-mode="swift">aW1wb3J0IFVJS2l0CgpjbGFzcyBJUE1lc3NhZ2luZ01hbmFnZXI6IE5TT2JqZWN0LCBUd2lsaW9BY2Nlc3NNYW5hZ2VyRGVsZWdhdGUgewoKICBzdGF0aWMgbGV0IF9zaGFyZWRNYW5hZ2VyID0gSVBNZXNzYWdpbmdNYW5hZ2VyKCkKCiAgdmFyIGNsaWVudDpUd2lsaW9JUE1lc3NhZ2luZ0NsaWVudD8KICB2YXIgY29ubmVjdGVkID0gZmFsc2UKCiAgdmFyIHVzZXJJZGVudGl0eTpTdHJpbmcgewogICAgcmV0dXJuIFNlc3Npb25NYW5hZ2VyLmdldFVzZXJuYW1lKCkKICB9CgogIHZhciBoYXNJZGVudGl0eTogQm9vbCB7CiAgICByZXR1cm4gU2Vzc2lvbk1hbmFnZXIuaXNMb29nZWRJbigpCiAgfQoKICBjbGFzcyBmdW5jIHNoYXJlZE1hbmFnZXIoKSAtPiBJUE1lc3NhZ2luZ01hbmFnZXIgewogICAgcmV0dXJuIF9zaGFyZWRNYW5hZ2VyCiAgfQoKICBmdW5jIHByZXNlbnRSb290Vmlld0NvbnRyb2xsZXIoKSB7CiAgICBpZiAoIWhhc0lkZW50aXR5KSB7CiAgICAgIHByZXNlbnRWaWV3Q29udHJvbGxlckJ5TmFtZSgiTG9naW5WaWV3Q29udHJvbGxlciIpCiAgICAgIHJldHVybgogICAgfQoKICAgIGlmICghY29ubmVjdGVkKSB7CiAgICAgIGNvbm5lY3RDbGllbnRXaXRoQ29tcGxldGlvbiB7IHN1Y2Nlc3MsIGVycm9yIGluCiAgICAgICAgbGV0IHZpZXdDb250cm9sbGVyID0gc3VjY2VzcyA/ICJSZXZlYWxWaWV3Q29udHJvbGxlciIgOiAiTG9naW5WaWV3Q29udHJvbGxlciIKICAgICAgICBzZWxmLnByZXNlbnRWaWV3Q29udHJvbGxlckJ5TmFtZSh2aWV3Q29udHJvbGxlcikKICAgICAgfQogICAgICByZXR1cm4KICAgIH0KCiAgICBwcmVzZW50Vmlld0NvbnRyb2xsZXJCeU5hbWUoIlJldmVhbFZpZXdDb250cm9sbGVyIikKICB9CgogIGZ1bmMgcHJlc2VudFZpZXdDb250cm9sbGVyQnlOYW1lKHZpZXdDb250cm9sbGVyOiBTdHJpbmcpIHsKICAgIHByZXNlbnRWaWV3Q29udHJvbGxlcihzdG9yeUJvYXJkV2l0aE5hbWUoIk1haW4iKS5pbnN0YW50aWF0ZVZpZXdDb250cm9sbGVyV2l0aElkZW50aWZpZXIodmlld0NvbnRyb2xsZXIpKQogIH0KCiAgZnVuYyBwcmVzZW50TGF1bmNoU2NyZWVuKCkgewogICAgcHJlc2VudFZpZXdDb250cm9sbGVyKHN0b3J5Qm9hcmRXaXRoTmFtZSgiTGF1bmNoU2NyZWVuIikuaW5zdGFudGlhdGVJbml0aWFsVmlld0NvbnRyb2xsZXIoKSEpCiAgfQoKICBmdW5jIHByZXNlbnRWaWV3Q29udHJvbGxlcihjb250cm9sbGVyOiBVSVZpZXdDb250cm9sbGVyKSB7CiAgICBsZXQgd2luZG93ID0gVUlBcHBsaWNhdGlvbi5zaGFyZWRBcHBsaWNhdGlvbigpLmRlbGVnYXRlIS53aW5kb3chIQogICAgd2luZG93LnJvb3RWaWV3Q29udHJvbGxlciA9IGNvbnRyb2xsZXIKICB9CgogIGZ1bmMgc3RvcnlCb2FyZFdpdGhOYW1lKG5hbWU6U3RyaW5nKSAtPiBVSVN0b3J5Ym9hcmQgewogICAgcmV0dXJuIFVJU3Rvcnlib2FyZChuYW1lOm5hbWUsIGJ1bmRsZTogTlNCdW5kbGUubWFpbkJ1bmRsZSgpKQogIH0KCiAgLy8gTUFSSzogVXNlciBhbmQgc2Vzc2lvbiBtYW5hZ2VtZW50CgogIGZ1bmMgbG9naW5XaXRoVXNlcm5hbWUodXNlcm5hbWU6IFN0cmluZywKICAgIGNvbXBsZXRpb246IChCb29sLCBOU0Vycm9yPykgLT4gVm9pZCkgewogICAgICBTZXNzaW9uTWFuYWdlci5sb2dpbldpdGhVc2VybmFtZSh1c2VybmFtZSkKICAgICAgY29ubmVjdENsaWVudFdpdGhDb21wbGV0aW9uKGNvbXBsZXRpb24pCiAgfQoKICBmdW5jIGxvZ291dCgpIHsKICAgIFNlc3Npb25NYW5hZ2VyLmxvZ291dCgpCiAgICBkaXNwYXRjaF9hc3luYyhkaXNwYXRjaF9nZXRfZ2xvYmFsX3F1ZXVlKERJU1BBVENIX1FVRVVFX1BSSU9SSVRZX0RFRkFVTFQsIDApKSB7CiAgICAgIHNlbGYuY2xpZW50Py5zaHV0ZG93bigpCiAgICAgIHNlbGYuY2xpZW50ID0gbmlsCiAgICB9CiAgICBzZWxmLmNvbm5lY3RlZCA9IGZhbHNlCiAgfQoKICAvLyBNQVJLOiBUd2lsaW8gQ2xpZW50CgogIGZ1bmMgY29ubmVjdENsaWVudFdpdGhDb21wbGV0aW9uKGNvbXBsZXRpb246IChCb29sLCBOU0Vycm9yPykgLT4gVm9pZCkgewogICAgaWYgKGNsaWVudCAhPSBuaWwpIHsKICAgICAgbG9nb3V0KCkKICAgIH0KCiAgICByZXF1ZXN0VG9rZW5XaXRoQ29tcGxldGlvbiB7IHN1Y2NlZWRlZCwgdG9rZW4gaW4KICAgICAgaWYgbGV0IHRva2VuID0gdG9rZW4gd2hlcmUgc3VjY2VlZGVkIHsKICAgICAgICBzZWxmLmluaXRpYWxpemVDbGllbnRXaXRoVG9rZW4odG9rZW4pCiAgICAgICAgc2VsZi5sb2FkR2VuZXJhbENoYXRSb29tV2l0aENvbXBsZXRpb24oY29tcGxldGlvbikKICAgICAgfQogICAgICBlbHNlIHsKICAgICAgICBsZXQgZXJyb3IgPSBzZWxmLmVycm9yV2l0aERlc2NyaXB0aW9uKCJDb3VsZCBub3QgZ2V0IGFjY2VzcyB0b2tlbiIsIGNvZGU6MzAxKQogICAgICAgIGNvbXBsZXRpb24oc3VjY2VlZGVkLCBlcnJvcikKICAgICAgfQogICAgfQogIH0KCiAgZnVuYyBpbml0aWFsaXplQ2xpZW50V2l0aFRva2VuKHRva2VuOiBTdHJpbmcpIHsKICAgIGxldCBhY2Nlc3NNYW5hZ2VyID0gVHdpbGlvQWNjZXNzTWFuYWdlcih0b2tlbjp0b2tlbiwgZGVsZWdhdGU6c2VsZikKICAgIGNsaWVudCA9IFR3aWxpb0lQTWVzc2FnaW5nQ2xpZW50LmlwTWVzc2FnaW5nQ2xpZW50V2l0aEFjY2Vzc01hbmFnZXIoYWNjZXNzTWFuYWdlciwgZGVsZWdhdGU6IG5pbCkKICB9CgogIGZ1bmMgbG9hZEdlbmVyYWxDaGF0Um9vbVdpdGhDb21wbGV0aW9uKGNvbXBsZXRpb246KEJvb2wsIE5TRXJyb3I/KSAtPiBWb2lkKSB7CiAgICBDaGFubmVsTWFuYWdlci5zaGFyZWRNYW5hZ2VyLmpvaW5HZW5lcmFsQ2hhdFJvb21XaXRoQ29tcGxldGlvbiB7IHN1Y2NlZWRlZCBpbgogICAgICBpZiBzdWNjZWVkZWQgewogICAgICAgIHNlbGYuY29ubmVjdGVkID0gdHJ1ZQogICAgICAgIGNvbXBsZXRpb24oc3VjY2VlZGVkLCBuaWwpCiAgICAgIH0KICAgICAgZWxzZSB7CiAgICAgICAgbGV0IGVycm9yID0gc2VsZi5lcnJvcldpdGhEZXNjcmlwdGlvbigiQ291bGQgbm90IGpvaW4gR2VuZXJhbCBjaGFubmVsIiwgY29kZTogMzAwKQogICAgICAgIGNvbXBsZXRpb24oc3VjY2VlZGVkLCBlcnJvcikKICAgICAgfQogICAgfQogIH0KCiAgZnVuYyByZXF1ZXN0VG9rZW5XaXRoQ29tcGxldGlvbihjb21wbGV0aW9uOihCb29sLCBTdHJpbmc/KSAtPiBWb2lkKSB7CiAgICBpZiBsZXQgZGV2aWNlID0gVUlEZXZpY2UuY3VycmVudERldmljZSgpLmlkZW50aWZpZXJGb3JWZW5kb3I/LlVVSURTdHJpbmcgewogICAgICBUb2tlblJlcXVlc3RIYW5kbGVyLmZldGNoVG9rZW4oWyJkZXZpY2UiOiBkZXZpY2UsICJpZGVudGl0eSI6U2Vzc2lvbk1hbmFnZXIuZ2V0VXNlcm5hbWUoKV0pIHtyZXNwb25zZSxlcnJvciBpbgogICAgICAgIHZhciB0b2tlbjogU3RyaW5nPwogICAgICAgIHRva2VuID0gcmVzcG9uc2VbInRva2VuIl0gYXM/IFN0cmluZwogICAgICAgIGNvbXBsZXRpb24odG9rZW4gIT0gbmlsLCB0b2tlbikKICAgICAgfQogICAgfQogIH0KCiAgZnVuYyBlcnJvcldpdGhEZXNjcmlwdGlvbihkZXNjcmlwdGlvbjogU3RyaW5nLCBjb2RlOiBJbnQpIC0+IE5TRXJyb3IgewogICAgbGV0IHVzZXJJbmZvID0gW05TTG9jYWxpemVkRGVzY3JpcHRpb25LZXkgOiBkZXNjcmlwdGlvbl0KICAgIHJldHVybiBOU0Vycm9yKGRvbWFpbjogImFwcCIsIGNvZGU6IGNvZGUsIHVzZXJJbmZvOiB1c2VySW5mbykKICB9CgogIC8vIE1BUks6IFR3aWxpb0FjY2Vzc01hbmFnZXJEZWxlZ2F0ZQoKICBmdW5jIGFjY2Vzc01hbmFnZXJUb2tlbkV4cGlyZWQoYWNjZXNzTWFuYWdlcjogVHdpbGlvQWNjZXNzTWFuYWdlciEpIHsKICAgIHJlcXVlc3RUb2tlbldpdGhDb21wbGV0aW9uIHsgc3VjY2VlZGVkLCB0b2tlbiBpbgogICAgICBpZiAoc3VjY2VlZGVkKSB7CiAgICAgICAgYWNjZXNzTWFuYWdlci51cGRhdGVUb2tlbih0b2tlbikKICAgICAgfQogICAgICBlbHNlIHsKICAgICAgICBwcmludCgiRXJyb3Igd2hpbGUgdHJ5aW5nIHRvIGdldCBuZXcgYWNjZXNzIHRva2VuIikKICAgICAgfQogICAgfQogIH0KCiAgZnVuYyBhY2Nlc3NNYW5hZ2VyKGFjY2Vzc01hbmFnZXI6IFR3aWxpb0FjY2Vzc01hbmFnZXIhLCBlcnJvcjogTlNFcnJvciEpIHsKICAgIHByaW50KCJBY2Nlc3MgbWFuYWdlciBlcnJvcjogXChlcnJvci5sb2NhbGl6ZWREZXNjcmlwdGlvbikiKQogIH0KfQo=</textarea>
<textarea class="saurus-file" data-file="twiliochat/ChannelManager.swift" data-mode="swift">Y2xhc3MgQ2hhbm5lbE1hbmFnZXI6IE5TT2JqZWN0IHsKICBzdGF0aWMgbGV0IHNoYXJlZE1hbmFnZXIgPSBDaGFubmVsTWFuYWdlcigpCgogIHN0YXRpYyBsZXQgZGVmYXVsdENoYW5uZWxVbmlxdWVOYW1lID0gImdlbmVyYWwiCiAgc3RhdGljIGxldCBkZWZhdWx0Q2hhbm5lbE5hbWUgPSAiR2VuZXJhbCBDaGFubmVsIgoKICB3ZWFrIHZhciBkZWxlZ2F0ZTpUd2lsaW9JUE1lc3NhZ2luZ0NsaWVudERlbGVnYXRlPwoKICB2YXIgY2hhbm5lbHNMaXN0OlRXTUNoYW5uZWxzPwogIHZhciBjaGFubmVsczpOU011dGFibGVPcmRlcmVkU2V0PwogIHZhciBnZW5lcmFsQ2hhbm5lbDpUV01DaGFubmVsIQoKICBvdmVycmlkZSBpbml0KCkgewogICAgc3VwZXIuaW5pdCgpCiAgICBJUE1lc3NhZ2luZ01hbmFnZXIuc2hhcmVkTWFuYWdlcigpLmNsaWVudD8uZGVsZWdhdGUgPSBzZWxmCiAgfQoKICAvLyBNQVJLOiAtIEdlbmVyYWwgY2hhbm5lbAoKICBmdW5jIGpvaW5HZW5lcmFsQ2hhdFJvb21XaXRoQ29tcGxldGlvbihjb21wbGV0aW9uOiBCb29sIC0+IFZvaWQpIHsKICAgIHBvcHVsYXRlQ2hhbm5lbHNXaXRoQ29tcGxldGlvbiB7IHN1Y2NlZWRlZCBpbgogICAgICBsZXQgdW5pcXVlTmFtZSA9IENoYW5uZWxNYW5hZ2VyLmRlZmF1bHRDaGFubmVsVW5pcXVlTmFtZQogICAgICBpZiBsZXQgY2hhbm5lbHNMaXN0ID0gc2VsZi5jaGFubmVsc0xpc3QgewogICAgICAgIHNlbGYuZ2VuZXJhbENoYW5uZWwgPSBjaGFubmVsc0xpc3QuY2hhbm5lbFdpdGhVbmlxdWVOYW1lKHVuaXF1ZU5hbWUpCiAgICAgIH0KCiAgICAgIGlmIHNlbGYuZ2VuZXJhbENoYW5uZWwgIT0gbmlsIHsKICAgICAgICBzZWxmLmpvaW5HZW5lcmFsQ2hhdFJvb21XaXRoVW5pcXVlTmFtZShuaWwsIGNvbXBsZXRpb246IGNvbXBsZXRpb24pCiAgICAgICAgcmV0dXJuCiAgICAgIH0KCiAgICAgIHNlbGYuY3JlYXRlR2VuZXJhbENoYXRSb29tV2l0aENvbXBsZXRpb24geyBzdWNjZWVkZWQgaW4KICAgICAgICBpZiAoc3VjY2VlZGVkKSB7CiAgICAgICAgICBzZWxmLmpvaW5HZW5lcmFsQ2hhdFJvb21XaXRoVW5pcXVlTmFtZSh1bmlxdWVOYW1lLCBjb21wbGV0aW9uOiBjb21wbGV0aW9uKQogICAgICAgICAgcmV0dXJuCiAgICAgICAgfQoKICAgICAgICBjb21wbGV0aW9uKGZhbHNlKQogICAgICB9CiAgICB9CiAgfQoKICBmdW5jIGpvaW5HZW5lcmFsQ2hhdFJvb21XaXRoVW5pcXVlTmFtZShuYW1lOiBTdHJpbmc/LCBjb21wbGV0aW9uOiBCb29sIC0+IFZvaWQpIHsKICAgIGdlbmVyYWxDaGFubmVsLmpvaW5XaXRoQ29tcGxldGlvbiB7IHJlc3VsdCBpbgogICAgICBpZiAocmVzdWx0ID09IC5TdWNjZXNzICYmIG5hbWUgIT0gbmlsKSB7CiAgICAgICAgc2VsZi5zZXRHZW5lcmFsQ2hhdFJvb21VbmlxdWVOYW1lV2l0aENvbXBsZXRpb24oY29tcGxldGlvbikKICAgICAgICByZXR1cm4KICAgICAgfQogICAgICBjb21wbGV0aW9uKHJlc3VsdCA9PSAuU3VjY2VzcykKICAgIH0KICB9CgogIGZ1bmMgY3JlYXRlR2VuZXJhbENoYXRSb29tV2l0aENvbXBsZXRpb24oY29tcGxldGlvbjogQm9vbCAtPiBWb2lkKSB7CiAgICBsZXQgY2hhbm5lbE5hbWUgPSBDaGFubmVsTWFuYWdlci5kZWZhdWx0Q2hhbm5lbE5hbWUKICAgIGNoYW5uZWxzTGlzdCEuY3JlYXRlQ2hhbm5lbFdpdGhGcmllbmRseU5hbWUoY2hhbm5lbE5hbWUsIHR5cGU6IC5QdWJsaWMpIHsgcmVzdWx0LCBjaGFubmVsIGluCiAgICAgIGlmIChyZXN1bHQgPT0gLlN1Y2Nlc3MpIHsKICAgICAgICBzZWxmLmdlbmVyYWxDaGFubmVsID0gY2hhbm5lbAogICAgICB9CiAgICAgIGNvbXBsZXRpb24ocmVzdWx0ID09IC5TdWNjZXNzKQogICAgfQogIH0KCiAgZnVuYyBzZXRHZW5lcmFsQ2hhdFJvb21VbmlxdWVOYW1lV2l0aENvbXBsZXRpb24oY29tcGxldGlvbjpCb29sIC0+IFZvaWQpIHsKICAgIGdlbmVyYWxDaGFubmVsLnNldFVuaXF1ZU5hbWUoQ2hhbm5lbE1hbmFnZXIuZGVmYXVsdENoYW5uZWxVbmlxdWVOYW1lKSB7IHJlc3VsdCBpbgogICAgICBjb21wbGV0aW9uKHJlc3VsdCA9PSAuU3VjY2VzcykKICAgIH0KICB9CgogIC8vIE1BUks6IC0gUG9wdWxhdGUgY2hhbm5lbHMKCiAgZnVuYyBwb3B1bGF0ZUNoYW5uZWxzV2l0aENvbXBsZXRpb24oY29tcGxldGlvbjogQm9vbCAtPiBWb2lkKSB7CiAgICBjaGFubmVscyA9IG5pbAoKICAgIGxvYWRDaGFubmVsTGlzdFdpdGhDb21wbGV0aW9uIHsgc3VjY2VlZGVkLCBjaGFubmVsTGlzdCBpbgogICAgICBpZiAoIXN1Y2NlZWRlZCkgewogICAgICAgIGRpc3BhdGNoX2FzeW5jKGRpc3BhdGNoX2dldF9tYWluX3F1ZXVlKCksIHsKICAgICAgICAgIHNlbGYuY2hhbm5lbHNMaXN0ID0gbmlsCiAgICAgICAgICBzZWxmLmNoYW5uZWxzID0gbmlsCiAgICAgICAgICBjb21wbGV0aW9uKGZhbHNlKQogICAgICAgIH0pCiAgICAgICAgcmV0dXJuCiAgICAgIH0KCiAgICAgIGRpc3BhdGNoX2FzeW5jKGRpc3BhdGNoX2dldF9nbG9iYWxfcXVldWUoRElTUEFUQ0hfUVVFVUVfUFJJT1JJVFlfREVGQVVMVCwgMCkpIHsKICAgICAgICBjaGFubmVsTGlzdCEubG9hZENoYW5uZWxzV2l0aENvbXBsZXRpb24geyByZXN1bHQgaW4KICAgICAgICAgIGlmIChyZXN1bHQgPT0gLlN1Y2Nlc3MpIHsKICAgICAgICAgICAgc2VsZi5jaGFubmVscyA9IE5TTXV0YWJsZU9yZGVyZWRTZXQoKQogICAgICAgICAgICBzZWxmLmNoYW5uZWxzIS5hZGRPYmplY3RzRnJvbUFycmF5KGNoYW5uZWxMaXN0IS5hbGxPYmplY3RzKCkpCiAgICAgICAgICAgIHNlbGYuc29ydENoYW5uZWxzKCkKICAgICAgICAgIH0KICAgICAgICAgIGRpc3BhdGNoX2FzeW5jKGRpc3BhdGNoX2dldF9tYWluX3F1ZXVlKCkpIHsKICAgICAgICAgICAgY29tcGxldGlvbihyZXN1bHQgPT0gLlN1Y2Nlc3MpCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQoKICBmdW5jIGxvYWRDaGFubmVsTGlzdFdpdGhDb21wbGV0aW9uKGNvbXBsZXRpb246IChCb29sLCBUV01DaGFubmVscz8pIC0+IFZvaWQpIHsKICAgIHNlbGYuY2hhbm5lbHNMaXN0ID0gbmlsCgogICAgZGlzcGF0Y2hfYXN5bmMoZGlzcGF0Y2hfZ2V0X2dsb2JhbF9xdWV1ZShESVNQQVRDSF9RVUVVRV9QUklPUklUWV9ERUZBVUxULCAwKSkgewogICAgICBJUE1lc3NhZ2luZ01hbmFnZXIuc2hhcmVkTWFuYWdlcigpLmNsaWVudCEuY2hhbm5lbHNMaXN0V2l0aENvbXBsZXRpb24geyByZXN1bHQsIGNoYW5uZWxzTGlzdCBpbgogICAgICAgIGlmIChyZXN1bHQgPT0gLlN1Y2Nlc3MpIHsKICAgICAgICAgIHNlbGYuY2hhbm5lbHNMaXN0ID0gY2hhbm5lbHNMaXN0CiAgICAgICAgfQogICAgICAgIGRpc3BhdGNoX2FzeW5jKGRpc3BhdGNoX2dldF9tYWluX3F1ZXVlKCksIHsKICAgICAgICAgIGNvbXBsZXRpb24ocmVzdWx0ID09IC5TdWNjZXNzLCBzZWxmLmNoYW5uZWxzTGlzdCkKICAgICAgICB9KQogICAgICB9CiAgICB9CiAgfQoKICBmdW5jIHNvcnRDaGFubmVscygpIHsKICAgIGxldCBzb3J0U2VsZWN0b3IgPSBTZWxlY3RvcigibG9jYWxpemVkQ2FzZUluc2Vuc2l0aXZlQ29tcGFyZToiKQogICAgbGV0IGRlc2NyaXB0b3IgPSBOU1NvcnREZXNjcmlwdG9yKGtleTogImZyaWVuZGx5TmFtZSIsIGFzY2VuZGluZzogdHJ1ZSwgc2VsZWN0b3I6IHNvcnRTZWxlY3RvcikKICAgIGNoYW5uZWxzIS5zb3J0VXNpbmdEZXNjcmlwdG9ycyhbZGVzY3JpcHRvcl0pCiAgfQoKICAvLyBNQVJLOiAtIENyZWF0ZSBjaGFubmVsCgogIGZ1bmMgY3JlYXRlQ2hhbm5lbFdpdGhOYW1lKG5hbWU6IFN0cmluZywgY29tcGxldGlvbjogKEJvb2wsIFRXTUNoYW5uZWw/KSAtPiBWb2lkKSB7CiAgICBpZiAobmFtZSA9PSBDaGFubmVsTWFuYWdlci5kZWZhdWx0Q2hhbm5lbE5hbWUpIHsKICAgICAgY29tcGxldGlvbihmYWxzZSwgbmlsKQogICAgICByZXR1cm4KICAgIH0KCiAgICBpZiAoY2hhbm5lbHNMaXN0ID09IG5pbCkKICAgIHsKICAgICAgbG9hZENoYW5uZWxMaXN0V2l0aENvbXBsZXRpb24geyBzdWNjZWVkZWQsIGNoYW5uZWxzTGlzdCBpbgogICAgICAgIGlmIChzdWNjZWVkZWQpIHsKICAgICAgICAgIHNlbGYuY3JlYXRlQ2hhbm5lbFdpdGhOYW1lKG5hbWUsIGNvbXBsZXRpb246IGNvbXBsZXRpb24pCiAgICAgICAgICByZXR1cm4KICAgICAgICB9CiAgICAgICAgY29tcGxldGlvbihzdWNjZWVkZWQsIG5pbCkKICAgICAgfQogICAgICByZXR1cm4KICAgIH0KCiAgICBzZWxmLmNoYW5uZWxzTGlzdD8uY3JlYXRlQ2hhbm5lbFdpdGhGcmllbmRseU5hbWUobmFtZSwgdHlwZTogLlB1YmxpYykgeyByZXN1bHQsIGNoYW5uZWwgaW4KICAgICAgY29tcGxldGlvbihyZXN1bHQgPT0gLlN1Y2Nlc3MsIGNoYW5uZWwpCiAgICB9CiAgfQp9CgovLyBNQVJLOiAtIFR3aWxpb0lQTWVzc2FnaW5nQ2xpZW50RGVsZWdhdGUKZXh0ZW5zaW9uIENoYW5uZWxNYW5hZ2VyIDogVHdpbGlvSVBNZXNzYWdpbmdDbGllbnREZWxlZ2F0ZSB7CiAgZnVuYyBpcE1lc3NhZ2luZ0NsaWVudChjbGllbnQ6IFR3aWxpb0lQTWVzc2FnaW5nQ2xpZW50ISwgY2hhbm5lbEFkZGVkIGNoYW5uZWw6IFRXTUNoYW5uZWwhKSB7CiAgICBkaXNwYXRjaF9hc3luYyhkaXNwYXRjaF9nZXRfbWFpbl9xdWV1ZSgpLCB7CiAgICAgIGlmIHNlbGYuY2hhbm5lbHMgIT0gbmlsIHsKICAgICAgICBzZWxmLmNoYW5uZWxzIS5hZGRPYmplY3QoY2hhbm5lbCkKICAgICAgICBzZWxmLnNvcnRDaGFubmVscygpCiAgICAgICAgc2VsZi5kZWxlZ2F0ZT8uaXBNZXNzYWdpbmdDbGllbnQ/KGNsaWVudCwgY2hhbm5lbEFkZGVkOiBjaGFubmVsKQogICAgICB9CiAgICB9KQogIH0KCiAgZnVuYyBpcE1lc3NhZ2luZ0NsaWVudChjbGllbnQ6IFR3aWxpb0lQTWVzc2FnaW5nQ2xpZW50ISwgY2hhbm5lbENoYW5nZWQgY2hhbm5lbDogVFdNQ2hhbm5lbCEpIHsKICAgIGRpc3BhdGNoX2FzeW5jKGRpc3BhdGNoX2dldF9tYWluX3F1ZXVlKCksIHsKICAgICAgaWYgc2VsZi5jaGFubmVscyAhPSBuaWwgewogICAgICAgIHNlbGYuZGVsZWdhdGU/LmlwTWVzc2FnaW5nQ2xpZW50PyhjbGllbnQsIGNoYW5uZWxDaGFuZ2VkOiBjaGFubmVsKQogICAgICB9CiAgICB9KQogIH0KCiAgZnVuYyBpcE1lc3NhZ2luZ0NsaWVudChjbGllbnQ6IFR3aWxpb0lQTWVzc2FnaW5nQ2xpZW50ISwgY2hhbm5lbERlbGV0ZWQgY2hhbm5lbDogVFdNQ2hhbm5lbCEpIHsKICAgIGRpc3BhdGNoX2FzeW5jKGRpc3BhdGNoX2dldF9tYWluX3F1ZXVlKCksIHsKICAgICAgaWYgc2VsZi5jaGFubmVscyAhPSBuaWwgewogICAgICAgIHNlbGYuY2hhbm5lbHM/LnJlbW92ZU9iamVjdChjaGFubmVsKQogICAgICAgIHNlbGYuZGVsZWdhdGU/LmlwTWVzc2FnaW5nQ2xpZW50PyhjbGllbnQsIGNoYW5uZWxEZWxldGVkOiBjaGFubmVsKQogICAgICB9CiAgICB9KQogIH0KfQo=</textarea>
<textarea class="saurus-file" data-file="twiliochat/MainChatViewController.swift" data-mode="swift">aW1wb3J0IFVJS2l0CmltcG9ydCBTV1JldmVhbFZpZXdDb250cm9sbGVyCmltcG9ydCBTbGFja1RleHRWaWV3Q29udHJvbGxlcgoKY2xhc3MgTWFpbkNoYXRWaWV3Q29udHJvbGxlcjogU0xLVGV4dFZpZXdDb250cm9sbGVyIHsKICBzdGF0aWMgbGV0IFRXQ0NoYXRDZWxsSWRlbnRpZmllciA9ICJDaGF0VGFibGVDZWxsIgogIHN0YXRpYyBsZXQgVFdDQ2hhdFN0YXR1c0NlbGxJZGVudGlmaWVyID0gIkNoYXRTdGF0dXNUYWJsZUNlbGwiCgogIHN0YXRpYyBsZXQgVFdDT3BlbkdlbmVyYWxDaGFubmVsU2VndWUgPSAiT3BlbkdlbmVyYWxDaGF0IgogIHN0YXRpYyBsZXQgVFdDTGFiZWxUYWcgPSAyMDAKCiAgdmFyIF9jaGFubmVsOlRXTUNoYW5uZWwhCiAgdmFyIGNoYW5uZWw6VFdNQ2hhbm5lbCEgewogICAgZ2V0IHsKICAgICAgcmV0dXJuIF9jaGFubmVsCiAgICB9CiAgICBzZXQoY2hhbm5lbCkgewogICAgICBfY2hhbm5lbCA9IGNoYW5uZWwKICAgICAgdGl0bGUgPSBfY2hhbm5lbC5mcmllbmRseU5hbWUKICAgICAgX2NoYW5uZWwuZGVsZWdhdGUgPSBzZWxmCgogICAgICBpZiBfY2hhbm5lbCA9PSBDaGFubmVsTWFuYWdlci5zaGFyZWRNYW5hZ2VyLmdlbmVyYWxDaGFubmVsIHsKICAgICAgICBuYXZpZ2F0aW9uSXRlbS5yaWdodEJhckJ1dHRvbkl0ZW0gPSBuaWwKICAgICAgfQoKICAgICAgam9pbkNoYW5uZWwoKQogICAgfQogIH0KCiAgdmFyIG1lc3NhZ2VzOlNldDxUV01NZXNzYWdlPiA9IFNldDxUV01NZXNzYWdlPigpCiAgdmFyIHNvcnRlZE1lc3NhZ2VzOltUV01NZXNzYWdlXSEKCiAgQElCT3V0bGV0IHdlYWsgdmFyIHJldmVhbEJ1dHRvbkl0ZW06IFVJQmFyQnV0dG9uSXRlbSEKICBASUJPdXRsZXQgd2VhayB2YXIgYWN0aW9uQnV0dG9uSXRlbTogVUlCYXJCdXR0b25JdGVtIQoKICBvdmVycmlkZSBmdW5jIHZpZXdEaWRMb2FkKCkgewogICAgc3VwZXIudmlld0RpZExvYWQoKQoKICAgIGlmIChyZXZlYWxWaWV3Q29udHJvbGxlcigpICE9IG5pbCkgewogICAgICByZXZlYWxCdXR0b25JdGVtLnRhcmdldCA9IHJldmVhbFZpZXdDb250cm9sbGVyKCkKICAgICAgcmV2ZWFsQnV0dG9uSXRlbS5hY3Rpb24gPSAicmV2ZWFsVG9nZ2xlOiIKICAgICAgbmF2aWdhdGlvbkNvbnRyb2xsZXI/Lm5hdmlnYXRpb25CYXIuYWRkR2VzdHVyZVJlY29nbml6ZXIocmV2ZWFsVmlld0NvbnRyb2xsZXIoKS5wYW5HZXN0dXJlUmVjb2duaXplcigpKQogICAgICByZXZlYWxWaWV3Q29udHJvbGxlcigpLnJlYXJWaWV3UmV2ZWFsT3ZlcmRyYXcgPSAwCiAgICB9CgogICAgYm91bmNlcyA9IHRydWUKICAgIHNoYWtlVG9DbGVhckVuYWJsZWQgPSB0cnVlCiAgICBrZXlib2FyZFBhbm5pbmdFbmFibGVkID0gdHJ1ZQogICAgc2hvdWxkU2Nyb2xsVG9Cb3R0b21BZnRlcktleWJvYXJkU2hvd3MgPSBmYWxzZQogICAgaW52ZXJ0ZWQgPSB0cnVlCgogICAgbGV0IGNlbGxOaWIgPSBVSU5pYihuaWJOYW1lOiBNYWluQ2hhdFZpZXdDb250cm9sbGVyLlRXQ0NoYXRDZWxsSWRlbnRpZmllciwgYnVuZGxlOiBuaWwpCiAgICB0YWJsZVZpZXcucmVnaXN0ZXJOaWIoY2VsbE5pYiwgZm9yQ2VsbFJldXNlSWRlbnRpZmllcjpNYWluQ2hhdFZpZXdDb250cm9sbGVyLlRXQ0NoYXRDZWxsSWRlbnRpZmllcikKCiAgICBsZXQgY2VsbFN0YXR1c05pYiA9IFVJTmliKG5pYk5hbWU6IE1haW5DaGF0Vmlld0NvbnRyb2xsZXIuVFdDQ2hhdFN0YXR1c0NlbGxJZGVudGlmaWVyLCBidW5kbGU6IG5pbCkKICAgIHRhYmxlVmlldy5yZWdpc3Rlck5pYihjZWxsU3RhdHVzTmliLCBmb3JDZWxsUmV1c2VJZGVudGlmaWVyOk1haW5DaGF0Vmlld0NvbnRyb2xsZXIuVFdDQ2hhdFN0YXR1c0NlbGxJZGVudGlmaWVyKQoKICAgIHRleHRJbnB1dGJhci5hdXRvSGlkZVJpZ2h0QnV0dG9uID0gdHJ1ZQogICAgdGV4dElucHV0YmFyLm1heENoYXJDb3VudCA9IDI1NgogICAgdGV4dElucHV0YmFyLmNvdW50ZXJTdHlsZSA9IC5TcGxpdAogICAgdGV4dElucHV0YmFyLmNvdW50ZXJQb3NpdGlvbiA9IC5Ub3AKCiAgICBsZXQgZm9udCA9IFVJRm9udChuYW1lOiJBdmVuaXItTGlnaHQiLCBzaXplOjE0KQogICAgdGV4dFZpZXcuZm9udCA9IGZvbnQKCiAgICByaWdodEJ1dHRvbi5zZXRUaXRsZUNvbG9yKFVJQ29sb3IocmVkOjAuOTczLCBncmVlbjowLjU1NywgYmx1ZTowLjUwMiwgYWxwaGE6MSksIGZvclN0YXRlOiAuTm9ybWFsKQoKICAgIGlmIGxldCBmb250ID0gVUlGb250KG5hbWU6IkF2ZW5pci1IZWF2eSIsIHNpemU6MTcpIHsKICAgICAgbmF2aWdhdGlvbkNvbnRyb2xsZXI/Lm5hdmlnYXRpb25CYXIudGl0bGVUZXh0QXR0cmlidXRlcyA9IFtOU0ZvbnRBdHRyaWJ1dGVOYW1lOiBmb250XQogICAgfQoKICAgIHRhYmxlVmlldy5hbGxvd3NTZWxlY3Rpb24gPSBmYWxzZQogICAgdGFibGVWaWV3LmVzdGltYXRlZFJvd0hlaWdodCA9IDcwCiAgICB0YWJsZVZpZXcucm93SGVpZ2h0ID0gVUlUYWJsZVZpZXdBdXRvbWF0aWNEaW1lbnNpb24KICAgIHRhYmxlVmlldy5zZXBhcmF0b3JTdHlsZSA9IC5Ob25lCgogICAgaWYgY2hhbm5lbCA9PSBuaWwgewogICAgICBjaGFubmVsID0gQ2hhbm5lbE1hbmFnZXIuc2hhcmVkTWFuYWdlci5nZW5lcmFsQ2hhbm5lbAogICAgfQogIH0KCiAgb3ZlcnJpZGUgZnVuYyB2aWV3RGlkQXBwZWFyKGFuaW1hdGVkOiBCb29sKSB7CiAgICBzdXBlci52aWV3RGlkQXBwZWFyKGFuaW1hdGVkKQogICAgc2Nyb2xsVG9Cb3R0b20oKQogIH0KCiAgb3ZlcnJpZGUgZnVuYyBudW1iZXJPZlNlY3Rpb25zSW5UYWJsZVZpZXcodGFibGVWaWV3OiBVSVRhYmxlVmlldykgLT4gSW50IHsKICAgIHJldHVybiAxCiAgfQoKICBvdmVycmlkZSBmdW5jIHRhYmxlVmlldyh0YWJsZVZpZXc6IFVJVGFibGVWaWV3LCBudW1iZXJPZlJvd3NJblNlY3Rpb24gc2VjdGlvbjogTlNJbnRlZ2VyKSAtPiBJbnQgewogICAgcmV0dXJuIG1lc3NhZ2VzLmNvdW50CiAgfQoKICBvdmVycmlkZSBmdW5jIHRhYmxlVmlldyh0YWJsZVZpZXc6IFVJVGFibGVWaWV3LCBjZWxsRm9yUm93QXRJbmRleFBhdGggaW5kZXhQYXRoOiBOU0luZGV4UGF0aCkgLT4gVUlUYWJsZVZpZXdDZWxsIHsKICAgIHZhciBjZWxsOlVJVGFibGVWaWV3Q2VsbAoKICAgIGxldCBtZXNzYWdlID0gc29ydGVkTWVzc2FnZXNbaW5kZXhQYXRoLnJvd10KCiAgICBpZiBsZXQgc3RhdHVzTWVzc2FnZSA9IG1lc3NhZ2UgYXM/IFN0YXR1c01lc3NhZ2UgewogICAgICBjZWxsID0gZ2V0U3RhdHVzQ2VsbEZvclRhYmxlVmlldyh0YWJsZVZpZXcsIGZvckluZGV4UGF0aDppbmRleFBhdGgsIG1lc3NhZ2U6c3RhdHVzTWVzc2FnZSkKICAgIH0KICAgIGVsc2UgewogICAgICBjZWxsID0gZ2V0Q2hhdENlbGxGb3JUYWJsZVZpZXcodGFibGVWaWV3LCBmb3JJbmRleFBhdGg6aW5kZXhQYXRoLCBtZXNzYWdlOm1lc3NhZ2UpCiAgICB9CgogICAgY2VsbC50cmFuc2Zvcm0gPSB0YWJsZVZpZXcudHJhbnNmb3JtCiAgICByZXR1cm4gY2VsbAogIH0KCiAgZnVuYyBnZXRDaGF0Q2VsbEZvclRhYmxlVmlldyh0YWJsZVZpZXc6IFVJVGFibGVWaWV3LCBmb3JJbmRleFBhdGggaW5kZXhQYXRoOk5TSW5kZXhQYXRoLCBtZXNzYWdlOiBUV01NZXNzYWdlKSAtPiBVSVRhYmxlVmlld0NlbGwgewogICAgbGV0IGNlbGwgPSB0YWJsZVZpZXcuZGVxdWV1ZVJldXNhYmxlQ2VsbFdpdGhJZGVudGlmaWVyKE1haW5DaGF0Vmlld0NvbnRyb2xsZXIuVFdDQ2hhdENlbGxJZGVudGlmaWVyLCBmb3JJbmRleFBhdGg6aW5kZXhQYXRoKQoKICAgIGxldCBjaGF0Q2VsbDogQ2hhdFRhYmxlQ2VsbCA9IGNlbGwgYXMhIENoYXRUYWJsZUNlbGwKICAgIGxldCB0aW1lc3RhbXAgPSBEYXRlVG9kYXlGb3JtYXR0ZXIoKS5zdHJpbmdGcm9tRGF0ZShOU0RhdGUuZGF0ZVdpdGhJU084NjAxU3RyaW5nKG1lc3NhZ2UudGltZXN0YW1wKSkKCiAgICBjaGF0Q2VsbC5zZXRVc2VyKG1lc3NhZ2UuYXV0aG9yID8/ICJbVW5rbm93biBhdXRob3JdIiwgbWVzc2FnZTogbWVzc2FnZS5ib2R5LCBkYXRlOiB0aW1lc3RhbXAgPz8gIltVbmtub3duIGRhdGVdIikKCiAgICByZXR1cm4gY2hhdENlbGwKICB9CgogIGZ1bmMgZ2V0U3RhdHVzQ2VsbEZvclRhYmxlVmlldyh0YWJsZVZpZXc6IFVJVGFibGVWaWV3LCBmb3JJbmRleFBhdGggaW5kZXhQYXRoOk5TSW5kZXhQYXRoLCBtZXNzYWdlOiBTdGF0dXNNZXNzYWdlKSAtPiBVSVRhYmxlVmlld0NlbGwgewogICAgbGV0IGNlbGwgPSB0YWJsZVZpZXcuZGVxdWV1ZVJldXNhYmxlQ2VsbFdpdGhJZGVudGlmaWVyKE1haW5DaGF0Vmlld0NvbnRyb2xsZXIuVFdDQ2hhdFN0YXR1c0NlbGxJZGVudGlmaWVyLCBmb3JJbmRleFBhdGg6aW5kZXhQYXRoKQoKICAgIGxldCBsYWJlbCA9IGNlbGwudmlld1dpdGhUYWcoTWFpbkNoYXRWaWV3Q29udHJvbGxlci5UV0NMYWJlbFRhZykgYXMhIFVJTGFiZWwKICAgIGxldCBtZW1iZXJTdGF0dXMgPSAobWVzc2FnZS5zdGF0dXMhID09IC5Kb2luZWQpID8gImpvaW5lZCIgOiAibGVmdCIKICAgIGxhYmVsLnRleHQgPSAiVXNlciBcKG1lc3NhZ2UubWVtYmVyLmlkZW50aXR5KCkpIGhhcyBcKG1lbWJlclN0YXR1cykiCiAgICByZXR1cm4gY2VsbAogIH0KCiAgZnVuYyBqb2luQ2hhbm5lbCgpIHsKICAgIGlmIGNoYW5uZWwuc3RhdHVzID09IC5Kb2luZWQgewogICAgICBsb2FkTWVzc2FnZXMoKQogICAgICByZXR1cm4KICAgIH0KCiAgICBVSUFwcGxpY2F0aW9uLnNoYXJlZEFwcGxpY2F0aW9uKCkubmV0d29ya0FjdGl2aXR5SW5kaWNhdG9yVmlzaWJsZSA9IHRydWUKICAgIHRleHRJbnB1dGJhckhpZGRlbiA9IHRydWUKCiAgICBjaGFubmVsLmpvaW5XaXRoQ29tcGxldGlvbiB7IHJlc3VsdCBpbgogICAgICBkaXNwYXRjaF9hc3luYyhkaXNwYXRjaF9nZXRfbWFpbl9xdWV1ZSgpLCB7CiAgICAgICAgVUlBcHBsaWNhdGlvbi5zaGFyZWRBcHBsaWNhdGlvbigpLm5ldHdvcmtBY3Rpdml0eUluZGljYXRvclZpc2libGUgPSBmYWxzZQogICAgICAgIHNlbGYuc2V0VGV4dElucHV0YmFySGlkZGVuKGZhbHNlLCBhbmltYXRlZDogdHJ1ZSkKICAgICAgfSkKICAgIH0KICB9CgogIG92ZXJyaWRlIGZ1bmMgZGlkUHJlc3NSaWdodEJ1dHRvbihzZW5kZXI6IEFueU9iamVjdCEpIHsKICAgIHRleHRWaWV3LnJlZnJlc2hGaXJzdFJlc3BvbmRlcigpCiAgICBzZW5kTWVzc2FnZSh0ZXh0Vmlldy50ZXh0KQogICAgc3VwZXIuZGlkUHJlc3NSaWdodEJ1dHRvbihzZW5kZXIpCiAgfQoKICAvLyBNQVJLOiAtIENoYXQgU2VydmljZQoKICBmdW5jIHNlbmRNZXNzYWdlKGlucHV0TWVzc2FnZTogU3RyaW5nKSB7CiAgICBsZXQgbWVzc2FnZSA9IGNoYW5uZWwubWVzc2FnZXMuY3JlYXRlTWVzc2FnZVdpdGhCb2R5KGlucHV0TWVzc2FnZSkKICAgIGNoYW5uZWwubWVzc2FnZXMuc2VuZE1lc3NhZ2UobWVzc2FnZSwgY29tcGxldGlvbjogbmlsKQogIH0KCiAgZnVuYyBhZGRNZXNzYWdlcyhuZXdNZXNzYWdlczpbVFdNTWVzc2FnZV0pIHsKICAgIG1lc3NhZ2VzID0gIG1lc3NhZ2VzLnVuaW9uKG5ld01lc3NhZ2VzKQogICAgc29ydE1lc3NhZ2VzKCkKICAgIGRpc3BhdGNoX2FzeW5jKGRpc3BhdGNoX2dldF9tYWluX3F1ZXVlKCksIHsKICAgICAgc2VsZi50YWJsZVZpZXcucmVsb2FkRGF0YSgpCiAgICAgIGlmIHNlbGYubWVzc2FnZXMuY291bnQgPiAwIHsKICAgICAgICBzZWxmLnNjcm9sbFRvQm90dG9tKCkKICAgICAgfQogICAgfSkKICB9CgogIGZ1bmMgc29ydE1lc3NhZ2VzKCkgewogICAgc29ydGVkTWVzc2FnZXMgPSBtZXNzYWdlcy5zb3J0IHsgYSwgYiBpbiBhLnRpbWVzdGFtcCA+IGIudGltZXN0YW1wIH0KICB9CgogIGZ1bmMgbG9hZE1lc3NhZ2VzKCkgewogICAgbWVzc2FnZXMucmVtb3ZlQWxsKCkKICAgIGFkZE1lc3NhZ2VzKGNoYW5uZWwubWVzc2FnZXMuYWxsT2JqZWN0cygpKQogIH0KCiAgZnVuYyBzY3JvbGxUb0JvdHRvbSgpIHsKICAgIGlmIG1lc3NhZ2VzLmNvdW50ID4gMCB7CiAgICAgIGxldCBpbmRleFBhdGggPSBOU0luZGV4UGF0aChmb3JSb3c6IDAsIGluU2VjdGlvbjogMCkKICAgICAgdGFibGVWaWV3LnNjcm9sbFRvUm93QXRJbmRleFBhdGgoaW5kZXhQYXRoLCBhdFNjcm9sbFBvc2l0aW9uOiAuQm90dG9tLCBhbmltYXRlZDogdHJ1ZSkKICAgIH0KICB9CgogIGZ1bmMgbGVhdmVDaGFubmVsKCkgewogICAgY2hhbm5lbC5sZWF2ZVdpdGhDb21wbGV0aW9uIHsgcmVzdWx0IGluCiAgICAgIGlmIHJlc3VsdCA9PSAuU3VjY2VzcyB7CiAgICAgICAgbGV0IG1lbnVWaWV3Q29udHJvbGxlciA9IHNlbGYucmV2ZWFsVmlld0NvbnRyb2xsZXIoKS5yZWFyVmlld0NvbnRyb2xsZXIgYXMhIE1lbnVWaWV3Q29udHJvbGxlcgogICAgICAgIG1lbnVWaWV3Q29udHJvbGxlci5kZXNlbGVjdFNlbGVjdGVkQ2hhbm5lbCgpCiAgICAgICAgc2VsZi5yZXZlYWxWaWV3Q29udHJvbGxlcigpLnJlYXJWaWV3Q29udHJvbGxlci5wZXJmb3JtU2VndWVXaXRoSWRlbnRpZmllcihNYWluQ2hhdFZpZXdDb250cm9sbGVyLlRXQ09wZW5HZW5lcmFsQ2hhbm5lbFNlZ3VlLCBzZW5kZXI6IG5pbCkKICAgICAgfQogICAgfQogIH0KCiAgLy8gTUFSSzogLSBBY3Rpb25zCgogIEBJQkFjdGlvbiBmdW5jIGFjdGlvbkJ1dHRvblRvdWNoZWQoc2VuZGVyOiBVSUJhckJ1dHRvbkl0ZW0pIHsKICAgIGxlYXZlQ2hhbm5lbCgpCiAgfQoKICBASUJBY3Rpb24gZnVuYyByZXZlYWxCdXR0b25Ub3VjaGVkKHNlbmRlcjogQW55T2JqZWN0KSB7CiAgICByZXZlYWxWaWV3Q29udHJvbGxlcigpLnJldmVhbFRvZ2dsZUFuaW1hdGVkKHRydWUpCiAgfQp9CgpleHRlbnNpb24gTWFpbkNoYXRWaWV3Q29udHJvbGxlciA6IFRXTUNoYW5uZWxEZWxlZ2F0ZSB7CiAgZnVuYyBpcE1lc3NhZ2luZ0NsaWVudChjbGllbnQ6IFR3aWxpb0lQTWVzc2FnaW5nQ2xpZW50ISwgY2hhbm5lbDogVFdNQ2hhbm5lbCEsIG1lc3NhZ2VBZGRlZCBtZXNzYWdlOiBUV01NZXNzYWdlISkgewogICAgaWYgIW1lc3NhZ2VzLmNvbnRhaW5zKG1lc3NhZ2UpIHsKICAgICAgYWRkTWVzc2FnZXMoW21lc3NhZ2VdKQogICAgfQogIH0KCiAgZnVuYyBpcE1lc3NhZ2luZ0NsaWVudChjbGllbnQ6IFR3aWxpb0lQTWVzc2FnaW5nQ2xpZW50ISwgY2hhbm5lbDogVFdNQ2hhbm5lbCEsIG1lbWJlckpvaW5lZCBtZW1iZXI6IFRXTU1lbWJlciEpIHsKICAgIGFkZE1lc3NhZ2VzKFtTdGF0dXNNZXNzYWdlKG1lbWJlcjptZW1iZXIsIHN0YXR1czouSm9pbmVkKV0pCiAgfQoKICBmdW5jIGlwTWVzc2FnaW5nQ2xpZW50KGNsaWVudDogVHdpbGlvSVBNZXNzYWdpbmdDbGllbnQhLCBjaGFubmVsOiBUV01DaGFubmVsISwgbWVtYmVyTGVmdCBtZW1iZXI6IFRXTU1lbWJlciEpIHsKICAgIGFkZE1lc3NhZ2VzKFtTdGF0dXNNZXNzYWdlKG1lbWJlcjptZW1iZXIsIHN0YXR1czouTGVmdCldKQogIH0KCiAgZnVuYyBpcE1lc3NhZ2luZ0NsaWVudChjbGllbnQ6IFR3aWxpb0lQTWVzc2FnaW5nQ2xpZW50ISwgY2hhbm5lbEhpc3RvcnlMb2FkZWQgY2hhbm5lbDogVFdNQ2hhbm5lbCEpIHsKICAgIGxvYWRNZXNzYWdlcygpCiAgICB0YWJsZVZpZXcucmVsb2FkRGF0YSgpCiAgfQoKICBmdW5jIGlwTWVzc2FnaW5nQ2xpZW50KGNsaWVudDogVHdpbGlvSVBNZXNzYWdpbmdDbGllbnQhLCBjaGFubmVsRGVsZXRlZCBjaGFubmVsOiBUV01DaGFubmVsISkgewogICAgZGlzcGF0Y2hfYXN5bmMoZGlzcGF0Y2hfZ2V0X21haW5fcXVldWUoKSwgewogICAgICBpZiBjaGFubmVsID09IHNlbGYuY2hhbm5lbCB7CiAgICAgICAgc2VsZi5yZXZlYWxWaWV3Q29udHJvbGxlcigpLnJlYXJWaWV3Q29udHJvbGxlcgogICAgICAgICAgLnBlcmZvcm1TZWd1ZVdpdGhJZGVudGlmaWVyKE1haW5DaGF0Vmlld0NvbnRyb2xsZXIuVFdDT3BlbkdlbmVyYWxDaGFubmVsU2VndWUsIHNlbmRlcjogbmlsKQogICAgICB9CiAgICB9KQogIH0KfQo=</textarea>
<textarea class="saurus-file" data-file="twiliochat/MenuViewController.swift" data-mode="swift">aW1wb3J0IFVJS2l0CgpjbGFzcyBNZW51Vmlld0NvbnRyb2xsZXI6IFVJVmlld0NvbnRyb2xsZXIgewogIHN0YXRpYyBsZXQgVFdDT3BlbkNoYW5uZWxTZWd1ZSA9ICJPcGVuQ2hhdCIKICBzdGF0aWMgbGV0IFRXQ1JlZnJlc2hDb250cm9sWE9mZnNldDogQ0dGbG9hdCA9IDEyMAoKICBASUJPdXRsZXQgd2VhayB2YXIgdGFibGVWaWV3OiBVSVRhYmxlVmlldyEKICBASUJPdXRsZXQgd2VhayB2YXIgdXNlcm5hbWVMYWJlbDogVUlMYWJlbCEKCiAgdmFyIHJlZnJlc2hDb250cm9sOiBVSVJlZnJlc2hDb250cm9sIQoKICBvdmVycmlkZSBmdW5jIHZpZXdEaWRMb2FkKCkgewogICAgc3VwZXIudmlld0RpZExvYWQoKQoKICAgIGxldCBiZ0ltYWdlID0gVUlJbWFnZVZpZXcoaW1hZ2U6IFVJSW1hZ2UobmFtZWQ6ImhvbWUtYmciKSkKICAgIGJnSW1hZ2UuZnJhbWUgPSBzZWxmLnRhYmxlVmlldy5mcmFtZQogICAgdGFibGVWaWV3LmJhY2tncm91bmRWaWV3ID0gYmdJbWFnZQoKICAgIHVzZXJuYW1lTGFiZWwudGV4dCA9IElQTWVzc2FnaW5nTWFuYWdlci5zaGFyZWRNYW5hZ2VyKCkudXNlcklkZW50aXR5CgogICAgcmVmcmVzaENvbnRyb2wgPSBVSVJlZnJlc2hDb250cm9sKCkKICAgIHRhYmxlVmlldy5hZGRTdWJ2aWV3KHJlZnJlc2hDb250cm9sKQogICAgcmVmcmVzaENvbnRyb2wuYWRkVGFyZ2V0KHNlbGYsIGFjdGlvbjogInJlZnJlc2hDaGFubmVscyIsIGZvckNvbnRyb2xFdmVudHM6IC5WYWx1ZUNoYW5nZWQpCiAgICByZWZyZXNoQ29udHJvbC50aW50Q29sb3IgPSBVSUNvbG9yLndoaXRlQ29sb3IoKQoKICAgIHNlbGYucmVmcmVzaENvbnRyb2wuZnJhbWUub3JpZ2luLnggLT0gTWVudVZpZXdDb250cm9sbGVyLlRXQ1JlZnJlc2hDb250cm9sWE9mZnNldAogICAgQ2hhbm5lbE1hbmFnZXIuc2hhcmVkTWFuYWdlci5kZWxlZ2F0ZSA9IHNlbGYKICAgIHNlbGYucG9wdWxhdGVDaGFubmVscygpCiAgfQoKICAvLyBNQVJLOiAtIEludGVybmFsIG1ldGhvZHMKCiAgZnVuYyBsb2FkaW5nQ2VsbEZvclRhYmxlVmlldyh0YWJsZVZpZXc6IFVJVGFibGVWaWV3KSAtPiBVSVRhYmxlVmlld0NlbGwgewogICAgcmV0dXJuIHRhYmxlVmlldy5kZXF1ZXVlUmV1c2FibGVDZWxsV2l0aElkZW50aWZpZXIoImxvYWRpbmdDZWxsIikhCiAgfQoKICBmdW5jIGNoYW5uZWxDZWxsRm9yVGFibGVWaWV3KHRhYmxlVmlldzogVUlUYWJsZVZpZXcsIGF0SW5kZXhQYXRoIGluZGV4UGF0aDogTlNJbmRleFBhdGgpIC0+IFVJVGFibGVWaWV3Q2VsbCB7CiAgICBsZXQgbWVudUNlbGwgPSB0YWJsZVZpZXcuZGVxdWV1ZVJldXNhYmxlQ2VsbFdpdGhJZGVudGlmaWVyKCJjaGFubmVsQ2VsbCIsIGZvckluZGV4UGF0aDogaW5kZXhQYXRoKSBhcyEgTWVudVRhYmxlQ2VsbAoKICAgIGxldCBjaGFubmVsID0gQ2hhbm5lbE1hbmFnZXIuc2hhcmVkTWFuYWdlci5jaGFubmVscyFbaW5kZXhQYXRoLnJvd10KICAgIHZhciBmcmllbmRseU5hbWUgPSBjaGFubmVsLmZyaWVuZGx5TmFtZQogICAgaWYgbGV0IG5hbWUgPSBjaGFubmVsLmZyaWVuZGx5TmFtZSB3aGVyZSBuYW1lLmlzRW1wdHkgewogICAgICBmcmllbmRseU5hbWUgPSBuYW1lCiAgICB9CiAgICBtZW51Q2VsbC5jaGFubmVsTmFtZSA9IGZyaWVuZGx5TmFtZQogICAgcmV0dXJuIG1lbnVDZWxsCiAgfQoKICBmdW5jIHBvcHVsYXRlQ2hhbm5lbHMoKSB7CiAgICBDaGFubmVsTWFuYWdlci5zaGFyZWRNYW5hZ2VyLnBvcHVsYXRlQ2hhbm5lbHNXaXRoQ29tcGxldGlvbiB7IHN1Y2Nlc3MgaW4KICAgICAgaWYgIXN1Y2Nlc3MgewogICAgICAgIEFsZXJ0RGlhbG9nQ29udHJvbGxlci5zaG93QWxlcnRXaXRoTWVzc2FnZSgiRmFpbGVkIHRvIGxvYWQgY2hhbm5lbHMiLAogICAgICAgICAgdGl0bGU6ICJJUCBNZXNzYWdpbmcgRGVtbyIsCiAgICAgICAgICBwcmVzZW50ZXI6IHNlbGYpCiAgICAgIH0KICAgICAgc2VsZi50YWJsZVZpZXcucmVsb2FkRGF0YSgpCiAgICAgIHNlbGYucmVmcmVzaENvbnRyb2wuZW5kUmVmcmVzaGluZygpCiAgICB9CiAgfQoKICBmdW5jIHJlZnJlc2hDaGFubmVscygpIHsKICAgIHJlZnJlc2hDb250cm9sLmJlZ2luUmVmcmVzaGluZygpCiAgICBwb3B1bGF0ZUNoYW5uZWxzKCkKICB9CgogIGZ1bmMgZGVzZWxlY3RTZWxlY3RlZENoYW5uZWwoKSB7CiAgICBsZXQgc2VsZWN0ZWRSb3cgPSB0YWJsZVZpZXcuaW5kZXhQYXRoRm9yU2VsZWN0ZWRSb3cKICAgIGlmIGxldCByb3cgPSBzZWxlY3RlZFJvdyB7CiAgICAgIHRhYmxlVmlldy5kZXNlbGVjdFJvd0F0SW5kZXhQYXRoKHJvdywgYW5pbWF0ZWQ6IHRydWUpCiAgICB9CiAgfQoKICAvLyBNQVJLOiAtIENoYW5uZWwKCiAgZnVuYyBjcmVhdGVOZXdDaGFubmVsRGlhbG9nKCkgewogICAgSW5wdXREaWFsb2dDb250cm9sbGVyLnNob3dXaXRoVGl0bGUoIk5ldyBDaGFubmVsIiwKICAgICAgbWVzc2FnZTogIkVudGVyIGEgbmFtZSBmb3IgdGhpcyBjaGFubmVsIiwKICAgICAgcGxhY2Vob2xkZXI6ICJOYW1lIiwKICAgICAgcHJlc2VudGVyOiBzZWxmKSB7IHRleHQgaW4KICAgICAgICBDaGFubmVsTWFuYWdlci5zaGFyZWRNYW5hZ2VyLmNyZWF0ZUNoYW5uZWxXaXRoTmFtZSh0ZXh0LCBjb21wbGV0aW9uOiB7IF8sXyBpbiB9KQogICAgfQogIH0KCiAgLy8gTUFSSzogTG9nb3V0CgogIGZ1bmMgcHJvbXB0TG9nb3V0KCkgewogICAgbGV0IGFsZXJ0ID0gVUlBbGVydENvbnRyb2xsZXIodGl0bGU6IG5pbCwgbWVzc2FnZTogIllvdSBhcmUgYWJvdXQgdG8gTG9nb3V0IiwgcHJlZmVycmVkU3R5bGU6IC5BbGVydCkKCiAgICBsZXQgY2FuY2VsQWN0aW9uID0gVUlBbGVydEFjdGlvbih0aXRsZTogIkNhbmNlbCIsIHN0eWxlOiAuQ2FuY2VsLCBoYW5kbGVyOiBuaWwpCiAgICBsZXQgY29uZmlybUFjdGlvbiA9IFVJQWxlcnRBY3Rpb24odGl0bGU6ICJDb25maXJtIiwgc3R5bGU6IC5EZWZhdWx0KSB7IGFjdGlvbiBpbgogICAgICBzZWxmLmxvZ091dCgpCiAgICB9CgogICAgYWxlcnQuYWRkQWN0aW9uKGNhbmNlbEFjdGlvbikKICAgIGFsZXJ0LmFkZEFjdGlvbihjb25maXJtQWN0aW9uKQogICAgcHJlc2VudFZpZXdDb250cm9sbGVyKGFsZXJ0LCBhbmltYXRlZDogdHJ1ZSwgY29tcGxldGlvbjogbmlsKQogIH0KCiAgZnVuYyBsb2dPdXQoKSB7CiAgICBJUE1lc3NhZ2luZ01hbmFnZXIuc2hhcmVkTWFuYWdlcigpLmxvZ291dCgpCiAgICBJUE1lc3NhZ2luZ01hbmFnZXIuc2hhcmVkTWFuYWdlcigpLnByZXNlbnRSb290Vmlld0NvbnRyb2xsZXIoKQogIH0KCiAgLy8gTUFSSzogLSBBY3Rpb25zCgogIEBJQkFjdGlvbiBmdW5jIGxvZ291dEJ1dHRvblRvdWNoZWQoc2VuZGVyOiBVSUJ1dHRvbikgewogICAgcHJvbXB0TG9nb3V0KCkKICB9CgogIEBJQkFjdGlvbiBmdW5jIG5ld0NoYW5uZWxCdXR0b25Ub3VjaGVkKHNlbmRlcjogVUlCdXR0b24pIHsKICAgIGNyZWF0ZU5ld0NoYW5uZWxEaWFsb2coKQogIH0KCiAgLy8gTUFSSzogLSBOYXZpZ2F0aW9uCgogIG92ZXJyaWRlIGZ1bmMgcHJlcGFyZUZvclNlZ3VlKHNlZ3VlOiBVSVN0b3J5Ym9hcmRTZWd1ZSwgc2VuZGVyOiBBbnlPYmplY3Q/KSB7CiAgICBpZiBzZWd1ZS5pZGVudGlmaWVyID09IE1lbnVWaWV3Q29udHJvbGxlci5UV0NPcGVuQ2hhbm5lbFNlZ3VlIHsKICAgICAgbGV0IGluZGV4UGF0aCA9IHNlbmRlciBhcyEgTlNJbmRleFBhdGgKICAgICAgbGV0IGNoYW5uZWwgPSBDaGFubmVsTWFuYWdlci5zaGFyZWRNYW5hZ2VyLmNoYW5uZWxzIVtpbmRleFBhdGgucm93XSBhcyEgVFdNQ2hhbm5lbAogICAgICBsZXQgbmF2aWdhdGlvbkNvbnRyb2xsZXIgPSBzZWd1ZS5kZXN0aW5hdGlvblZpZXdDb250cm9sbGVyIGFzISBVSU5hdmlnYXRpb25Db250cm9sbGVyCiAgICAgIChuYXZpZ2F0aW9uQ29udHJvbGxlci52aXNpYmxlVmlld0NvbnRyb2xsZXIgYXMhIE1haW5DaGF0Vmlld0NvbnRyb2xsZXIpLmNoYW5uZWwgPSBjaGFubmVsCiAgICB9CiAgfQoKICAvLyBNQVJLOiAtIFN0eWxlCgogIG92ZXJyaWRlIGZ1bmMgcHJlZmVycmVkU3RhdHVzQmFyU3R5bGUoKSAtPiBVSVN0YXR1c0JhclN0eWxlIHsKICAgIHJldHVybiAuTGlnaHRDb250ZW50CiAgfQp9CgovLyBNQVJLOiAtIFVJVGFibGVWaWV3RGF0YVNvdXJjZQpleHRlbnNpb24gTWVudVZpZXdDb250cm9sbGVyIDogVUlUYWJsZVZpZXdEYXRhU291cmNlIHsKICBmdW5jIHRhYmxlVmlldyh0YWJsZVZpZXc6IFVJVGFibGVWaWV3LCBudW1iZXJPZlJvd3NJblNlY3Rpb24gc2VjdGlvbjogSW50KSAtPiBJbnQgewogICAgaWYgbGV0IGNoYW5uZWxzID0gQ2hhbm5lbE1hbmFnZXIuc2hhcmVkTWFuYWdlci5jaGFubmVscyB7CiAgICAgIHJldHVybiBjaGFubmVscy5jb3VudAogICAgfQogICAgcmV0dXJuIDEKICB9CgogIGZ1bmMgdGFibGVWaWV3KHRhYmxlVmlldzogVUlUYWJsZVZpZXcsIGNlbGxGb3JSb3dBdEluZGV4UGF0aCBpbmRleFBhdGg6IE5TSW5kZXhQYXRoKSAtPiBVSVRhYmxlVmlld0NlbGwgewogICAgbGV0IGNlbGw6IFVJVGFibGVWaWV3Q2VsbAoKICAgIGlmIENoYW5uZWxNYW5hZ2VyLnNoYXJlZE1hbmFnZXIuY2hhbm5lbHMgPT0gbmlsIHsKICAgICAgY2VsbCA9IGxvYWRpbmdDZWxsRm9yVGFibGVWaWV3KHRhYmxlVmlldykKICAgIH0KICAgIGVsc2UgewogICAgICBjZWxsID0gY2hhbm5lbENlbGxGb3JUYWJsZVZpZXcodGFibGVWaWV3LCBhdEluZGV4UGF0aDogaW5kZXhQYXRoKQogICAgfQoKICAgIGNlbGwubGF5b3V0SWZOZWVkZWQoKQogICAgcmV0dXJuIGNlbGwKICB9CgogIGZ1bmMgdGFibGVWaWV3KHRhYmxlVmlldzogVUlUYWJsZVZpZXcsIGNhbkVkaXRSb3dBdEluZGV4UGF0aCBpbmRleFBhdGg6IE5TSW5kZXhQYXRoKSAtPiBCb29sIHsKICAgIGlmIGxldCBjaGFubmVsID0gQ2hhbm5lbE1hbmFnZXIuc2hhcmVkTWFuYWdlci5jaGFubmVscz8ub2JqZWN0QXRJbmRleChpbmRleFBhdGgucm93KSBhcz8gVFdNQ2hhbm5lbCB7CiAgICAgIHJldHVybiBjaGFubmVsICE9IENoYW5uZWxNYW5hZ2VyLnNoYXJlZE1hbmFnZXIuZ2VuZXJhbENoYW5uZWwKICAgIH0KICAgIHJldHVybiBmYWxzZQogIH0KCiAgZnVuYyB0YWJsZVZpZXcodGFibGVWaWV3OiBVSVRhYmxlVmlldywgY29tbWl0RWRpdGluZ1N0eWxlIGVkaXRpbmdTdHlsZTogVUlUYWJsZVZpZXdDZWxsRWRpdGluZ1N0eWxlLAogICAgZm9yUm93QXRJbmRleFBhdGggaW5kZXhQYXRoOiBOU0luZGV4UGF0aCkgewogICAgICBpZiBlZGl0aW5nU3R5bGUgIT0gLkRlbGV0ZSB7CiAgICAgICAgcmV0dXJuCiAgICAgIH0KICAgICAgaWYgbGV0IGNoYW5uZWwgPSBDaGFubmVsTWFuYWdlci5zaGFyZWRNYW5hZ2VyLmNoYW5uZWxzPy5vYmplY3RBdEluZGV4KGluZGV4UGF0aC5yb3cpIHsKICAgICAgICBjaGFubmVsLmRlc3Ryb3lXaXRoQ29tcGxldGlvbiB7IHJlc3VsdCBpbgogICAgICAgICAgaWYgcmVzdWx0ID09IC5TdWNjZXNzIHsKICAgICAgICAgICAgdGFibGVWaWV3LnJlbG9hZERhdGEoKQogICAgICAgICAgfQogICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIEFsZXJ0RGlhbG9nQ29udHJvbGxlci5zaG93QWxlcnRXaXRoTWVzc2FnZSgiWW91IGNhbiBub3QgZGVsZXRlIHRoaXMgY2hhbm5lbCIsIHRpdGxlOiBuaWwsIHByZXNlbnRlcjogc2VsZikKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICB9Cn0KCi8vIE1BUks6IC0gVUlUYWJsZVZpZXdEZWxlZ2F0ZQpleHRlbnNpb24gTWVudVZpZXdDb250cm9sbGVyIDogVUlUYWJsZVZpZXdEZWxlZ2F0ZSB7CiAgZnVuYyB0YWJsZVZpZXcodGFibGVWaWV3OiBVSVRhYmxlVmlldywgZGlkU2VsZWN0Um93QXRJbmRleFBhdGggaW5kZXhQYXRoOiBOU0luZGV4UGF0aCkgewogICAgcGVyZm9ybVNlZ3VlV2l0aElkZW50aWZpZXIoTWVudVZpZXdDb250cm9sbGVyLlRXQ09wZW5DaGFubmVsU2VndWUsIHNlbmRlcjogaW5kZXhQYXRoKQogIH0KfQoKLy8gTUFSSzogLSBUd2lsaW9JUE1lc3NhZ2luZ0NsaWVudERlbGVnYXRlCmV4dGVuc2lvbiBNZW51Vmlld0NvbnRyb2xsZXIgOiBUd2lsaW9JUE1lc3NhZ2luZ0NsaWVudERlbGVnYXRlIHsKICBmdW5jIGlwTWVzc2FnaW5nQ2xpZW50KGNsaWVudDogVHdpbGlvSVBNZXNzYWdpbmdDbGllbnQhLCBjaGFubmVsQWRkZWQgY2hhbm5lbDogVFdNQ2hhbm5lbCEpIHsKICAgIHRhYmxlVmlldy5yZWxvYWREYXRhKCkKICB9CgogIGZ1bmMgaXBNZXNzYWdpbmdDbGllbnQoY2xpZW50OiBUd2lsaW9JUE1lc3NhZ2luZ0NsaWVudCEsIGNoYW5uZWxDaGFuZ2VkIGNoYW5uZWw6IFRXTUNoYW5uZWwhKSB7CiAgICB0YWJsZVZpZXcucmVsb2FkRGF0YSgpCiAgfQoKICBmdW5jIGlwTWVzc2FnaW5nQ2xpZW50KGNsaWVudDogVHdpbGlvSVBNZXNzYWdpbmdDbGllbnQhLCBjaGFubmVsRGVsZXRlZCBjaGFubmVsOiBUV01DaGFubmVsISkgewogICAgdGFibGVWaWV3LnJlbG9hZERhdGEoKQogIH0KfQo=</textarea>
</div>
</div><div class="saurus-overview"><ul></ul></div></div><div class="saurus-code"><div class="file-path"><span class="crumb-container"></span><i class="fa fa-fw fa-folder"></i></div><div class="saurus-editor"></div></div><div class="saurus-explorer"><div class="saurus-file-list"></div><a href="https://github.com/TwilioDevEd/twiliochat-swift" target="_blank" class="explorer-get-code"> <i class="fa fa-lg fa-github-square"> </i>View Code on GitHub</a></div></div></div></div><script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min.js"></script><script src="ace/ace.js"></script><script src="ace/theme-monokai.js"></script><script src="viewsaurus.js"></script></body></html>